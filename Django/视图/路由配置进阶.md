# ä¸€ã€å¸¸è§„è®¾ç½®



## 1ã€æ­£åˆ™è·¯ç”±

- å¿…é¡»å¯¼å…¥re_path

```python
# è·¯ç”±

from django.urls import path, re_path
urlpatterns = [
    path('admin/', admin.site.urls),
    path('index/', views.index),
    re_path(r'^type/\d', views.show_hero)
]

# è§†å›¾
def show_hero(request):
    """
    è‹±é›„çš„è§†å›¾
    :return:
    """
    all_hero = HeroType.objects.all()
    hero_context = {
        'he': all_hero
    }
    return HttpResponse(content=b'ok')
```



- è·¯ç”±è®¾ç½®çš„æ—¶å€™é¦–å­—æ¯å‰é¢ä¸è¦åŠ æ–œæ ï¼Œä¸ç®¡æ˜¯ä¸€æ¬¡è·¯ç”±è¿˜æ˜¯äºŒæ¬¡åˆ†å‘è·¯ç”±ï¼Œéƒ½ä¸è¦åŠ 



## 2ã€ä¼ å‚è·¯ç”±

- é‡‡ç”¨`<int:id>`è¿™å…³é”®å­—çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ³¨æ„ï¼Œè¿™ä¸ªidæ˜¯ä¼šä¼ åˆ°è§†å›¾é‡Œé¢å»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è§†å›¾é‚£è¾¹å¿…é¡»æ¥æ”¶è¿™ä¸ªå‚æ•°ï¼Œä¸ç„¶æŠ¥é”™
- å¦‚æœè·¯ç”±é‡Œé¢æ˜¯ä¼ å…¥çš„idï¼Œ é‚£è¾¹è§†å›¾é‡Œé¢ä¹Ÿå¿…é¡»æ˜¯idï¼Œä»–ä»¬çš„åå­—å¿…é¡»ä¸€æ ·ï¼Œä¸ç„¶æŠ¥é”™ã€‚ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬è·¯ç”±é‡Œé¢æ˜¯`<int:id>`, é‚£ä¹ˆæˆ‘ä»¬è§†å›¾é‡Œé¢çš„å½¢å‚ä¹Ÿå¿…é¡»å«idï¼Œä¸èƒ½æ˜¯`show_hero(request, id1)`

```python
# è·¯ç”±
from django.contrib import admin
from django.urls import path
from wangzhe import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('index/', views.index),
    path('show_hero/<int:id>', views.show_hero)
]

# è§†å›¾
def show_hero(request, id):
    """
    è‹±é›„çš„è§†å›¾
    :return:
    """
    all_hero = HeroType.objects.all()
    hero_context = {
        'he': all_hero
    }
    return HttpResponse(content=str(id).encode())
```





# äºŒã€è·¯ç”±äºŒæ¬¡åˆ†å‘

å‰è¨€ï¼šæŒ‰ç…§æˆ‘ä»¬ä»¥å‰çš„æ–¹å¼ï¼Œå…¨éƒ¨è·¯ç”±å†™åˆ°é¡¹ç›®çš„ä¸»è·¯ç”±urls.pyå½“ä¸­ï¼Œä½†æ˜¯è¿™æ ·ä¸å¥½ã€‚ä¸ºä»€ä¹ˆäº†ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå¦‚æœå…¨éƒ¨å†™åˆ°ä¸€ä¸ªurls.pyå½“ä¸­çš„è¯ï¼Œæˆ‘ä»¬ç»´æŠ¤èµ·æ¥éå¸¸éº»çƒ¦ï¼Œç»å¸¸æ‰¾ä¸åˆ°è°æ˜¯è°äº†ã€‚æ‰€ä»¥å¦‚æœæ¯ä¸€ä¸ªåº”ç”¨è‡ªå·±ç»´æŠ¤è‡ªå·±çš„è·¯ç”±é‚£å°±ä¸èˆ’æœäº†ã€‚



#### ç¬¬ä¸€æ­¥ï¼šç»™åº”ç”¨åˆ›å»ºurls.pyæ–‡ä»¶

æˆ‘æ˜¯ç›´æ¥æŠŠä¸»è·¯ç”±çš„urls.pyæ–‡ä»¶å¤åˆ¶äº†ä¸€ä»½æäº†è¿‡æ¥

![image-20211206235021512](image-20211206235021512.png)



#### ç¬¬äºŒæ­¥ï¼šé…ç½®ä¸»è·¯ç”±åˆ†å‘

- é¦–å…ˆå¯¼å…¥includeæ–¹æ³•ï¼Œé…ç½®åˆ†å‘è§„åˆ™

![image-20211206235507507](image-20211206235507507.png)

åœ¨ä¸»è·¯ç”±ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®å¼€å‘ä¹ æƒ¯ï¼Œç»å¸¸è®²æˆ‘ä»¬çš„åº”ç”¨åä½œä¸ºä¸€çº§è·¯å¾„ï¼Œè¿™æ ·çš„åˆ’åˆ†æ›´åŠ æ¸…æ™°æ˜äº†



#### ç¬¬ä¸‰æ­¥ï¼šé…ç½®åº”ç”¨è·¯ç”±

è¿™é‡Œå°±æ²¡ä»€ä¹ˆå˜åŒ–äº†



# ä¸‰ã€æ­£åˆ™è·¯ç”±å–å‚æ•°



**ç”¨æ³•ï¼šdjangoæ˜¯é€šè¿‡æ­£åˆ™æ¨¡å—æ¥å–å€¼çš„**

ä¸¾ä¾‹çš„è¯·æ±‚URLï¼š http://127.0.0.1:8000/get_name_and_age/zhangsan20

![image-20220101231932168](image-20220101231932168.png)



**æ³¨æ„äº‹é¡¹ï¼š**

- å¦‚æœéƒ½é‡‡ç”¨åŒ¿ååˆ†ç»„ï¼Œè§†å›¾å‡½æ•°é€šè¿‡*argsæ¥æ¥æ”¶å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„
- å¦‚æœéƒ½é‡‡ç”¨å…·ååˆ†ç»„ï¼Œè§†å›¾å‡½æ•°é€šè¿‡**kwargsæ¥æ¥æ”¶å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸
- ğŸ”ºå¦‚æœæ··åˆä½¿ç”¨ï¼Œé‚£ä¹ˆåªèƒ½æ¥æ”¶åˆ°å…·ååˆ†ç»„çš„å‚æ•°ï¼Œé€šè¿‡**kwargsï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦
- æ ¹æ®ä¸Šé¢ç¬¬ä¸‰ç‚¹ï¼Œæˆ‘ä»¬æ¨æµ‹ä½œè€…çš„æ„å›¾æ˜¯è¦æˆ‘ä»¬é‡‡ç”¨ç»Ÿä¸€çš„ï¼Œè¦ä¹ˆä½¿ç”¨åˆ†ç»„ï¼Œè¦ä¹ˆä½¿ç”¨åŒ¿åï¼Œè¿™ä¸€ç‚¹ä¹Ÿå¯ä»¥åœ¨é‡å®šå‘ä¸­ä½“ç°ï¼Œå½“æˆ‘ä»¬é‡‡ç”¨å…³é”®å­—å‚æ•°å’Œå½¢å¼å‚æ•°æ··åˆä½¿ç”¨çš„æ—¶å€™ï¼Œä»–ä¼šç»™æˆ‘ä»¬æŠ¥é”™

![image-20220108201122462](image-20220108201122462.png)

- ğŸ”ºé‡ç‚¹ï¼šæµè§ˆå™¨ä¼šå°†ä¸­æ–‡è§£ææˆåå…­è¿›åˆ¶ç„¶åé€šè¿‡ç™¾åˆ†å·æ›¿æ¢\xe é€šè¿‡*å·ä»£æ›¿ç©ºæ ¼,æ‰€æœ‰æˆ‘ä»¬åœ¨å†™æ­£åˆ™çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„åŒ¹é…




# å››ã€ é‡å®šå‘

å¯¼å…¥é‡å®šå‘æ¨¡å—

```python
from django.shortcuts import redirect
```

```python
def delete_new(request):
    path = request.path
    pattern = r'/news/delete_news/(?P<id>\d)'
    match_result = re.search(pattern, path)
    news_id = match_result.groupdict()['id']
    delete_news_content_by_id = News.objects.filter(id=news_id)
    print(delete_news_content_by_id)
    if delete_news_content_by_id:
        delete_news_content_by_id[0].is_deleted = True
        delete_news_content_by_id[0].save()
        return redirect(to='/news/index')
    # return render(request, template_name='news_content.html', context=news_context)
    return HttpResponse(content='æ•°æ®ä¸å­˜åœ¨ !!!!!!')
```

æºç 

```python
def redirect(to, *args, permanent=False, **kwargs):
    """
    å°† HttpResponseRedirect è¿”å›åˆ°ä¼ é€’çš„å‚æ•°çš„é€‚å½“ URLã€‚
    è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯
        ä¸€ä¸ªæ¨¡å—ï¼šè¿™ä¸ªæ¨¡å—çš„`get_absolute_url()` å‡½æ•°å°†è¢«è°ƒç”¨ã€‚
        è§†å›¾åç§°ï¼Œå¯èƒ½å¸¦æœ‰å‚æ•°ï¼š`urls.reverse()` å°†ç”¨äºåå‘è§£æåç§°ã€‚
        ä¸€ä¸ª URLï¼Œå°†æŒ‰åŸæ ·ç”¨äºé‡å®šå‘ä½ç½®ã€‚
    é»˜è®¤æƒ…å†µä¸‹å‘å‡ºä¸´æ—¶é‡å®šå‘ï¼›
    é€šè¿‡ Permanent=True å‘å‡ºæ°¸ä¹…é‡å®šå‘
    resolve_url ï¼š j
    """
    redirect_class = HttpResponsePermanentRedirect if permanent else HttpResponseRedirect
    return redirect_class(resolve_url(to, *args, **kwargs))
```



#### 1ã€ç®€å•ä½¿ç”¨

```python
from django.shortcuts import redirect
```

**301: ä¸´æ—¶é‡å®šå‘**ï¼š ä¸»æœºåŸŸåæ²¡æœ‰å‘ç”Ÿæ”¹å˜

**302ï¼šæ°¸ä¹…é‡å®šå‘**ï¼šä¸»æœºåŸŸåéƒ½å‘é€äº†æ”¹å˜

æºç ä¸€ä¸‹ï¼š

```python
def redirect(to, *args, permanent=False, **kwargs):
    """
    å°† HttpResponseRedirect è¿”å›åˆ°ä¼ é€’çš„å‚æ•°çš„é€‚å½“ URLã€‚
    è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯
        ä¸€ä¸ªæ¨¡å—ï¼šè¿™ä¸ªæ¨¡å—çš„`get_absolute_url()` å‡½æ•°å°†è¢«è°ƒç”¨ã€‚  æ¯”å¦‚ resolve_url æ¨¡æ¿ï¼ˆä»–ä»¬æ˜¯é»„é‡‘æ­æ¡£ï¼‰
        è§†å›¾åç§°ï¼Œå¯èƒ½å¸¦æœ‰å‚æ•°ï¼š`urls.reverse()` å°†ç”¨äºåå‘è§£æåç§°ï¼Œæ¯”å¦‚to=loginè§†å›¾
        ä¸€ä¸ª URLï¼Œå°†æŒ‰åŸæ ·ç”¨äºé‡å®šå‘ä½ç½®ã€‚ è¿™ä¸ªå°±æ˜¯æœ€ç®€å•çš„äº†
    é»˜è®¤æƒ…å†µä¸‹å‘å‡ºä¸´æ—¶é‡å®šå‘ï¼›
    é€šè¿‡ Permanent=True å‘å‡ºæ°¸ä¹…é‡å®šå‘
    """
    redirect_class = HttpResponsePermanentRedirect if permanent else HttpResponseRedirect
    return redirect_class(resolve_url(to, *args, **kwargs))
```

- ```python
	return redirect(to='/')				# ä¸´æ—¶é‡å®šå‘åˆ°127.0.0.1ï¼š8080/,y
	```

- ```
	return redirect(to='/news/xxx')		# é‡å®šå‘åˆ°å…¶ä»–åœ°æ–¹ï¼Œæ ¹æ®url
	```

	



#### 2ã€å‚æ•°è¯¦ç»†å‰–æ

**to**

- å¯ä»¥æ˜¯ä¸€ä¸ªè·¯ç”±åœ°å€

	- '/'   è¡¨ç¤ºé‡å®šå‘åˆ°æ ¹åŸºè·¯ç”± 127.0.0.1
	- '/login/'  è¡¨ç¤ºé‡å®šå‘åˆ°127.0.0.1/login/
	- 'login/'    è¡¨ç¤ºä»locationä½ç½®å¼€å§‹ã€‚ æ¯”å¦‚èµ·å§‹è·¯ç”±åœ°å€æ˜¯127.0.0.1/test/ , é‚£ä¹ˆé‡å®šå‘è·¯ç”±ä¸º 127.0.0.1/test/login/

- è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªè§†å›¾åç§°

	- ```python
		def redirect(to, *args, permanent=False, **kwargs):
		    """
		    å°† HttpResponseRedirect è¿”å›åˆ°ä¼ é€’çš„å‚æ•°çš„é€‚å½“ URLã€‚
		    è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯
		        ä¸€ä¸ªæ¨¡å—ï¼šè¿™ä¸ªæ¨¡å—çš„`get_absolute_url()` å‡½æ•°å°†è¢«è°ƒç”¨ã€‚     æ¯”å¦‚reverse
		        è§†å›¾åç§°ï¼Œå¯èƒ½å¸¦æœ‰å‚æ•°ï¼š`urls.reverse()` å°†ç”¨äºåå‘è§£æåç§°ã€‚  redirect(to=login)
		        ä¸€ä¸ª URLï¼Œå°†æŒ‰åŸæ ·ç”¨äºé‡å®šå‘ä½ç½®ã€‚ æœ€å¸¸ç”¨çš„æ–¹å¼
		    é»˜è®¤æƒ…å†µä¸‹å‘å‡ºä¸´æ—¶é‡å®šå‘ï¼›
		    é€šè¿‡ Permanent=True å‘å‡ºæ°¸ä¹…é‡å®šå‘
		    resolve_url ï¼š j
		    """
		    redirect_class = HttpResponsePermanentRedirect if permanent else HttpResponseRedirect
		    return redirect_class(resolve_url(to, *args, **kwargs))
		```

		

	- ![image-20220106232044816](image-20220106232044816.png)






#### 3ã€é‡å®šå‘åˆ«åé…ç½®



**æ ¹åŸºè·¯ç”±ï¼ˆè·¯ç”±åˆ†å‘ï¼‰é…ç½® **

![image-20220108175858725](image-20220108175858725.png)



****

**è·¯ç”±è§†å›¾é…ç½®**

![image-20220108164754420](image-20220108164754420.png)



**æ³¨æ„ç‚¹:**

- namespace å’Œ name ä¸èƒ½é‡å¤ï¼Œä¸ç„¶æŠ¥é”™ã€‚nameå’Œnameå¯ä»¥é‡å¤
- é…ç½®namespaceï¼Œå°±ä¸€å®šè¦é…ç½®äºŒçº§è·¯ç”±çš„nameï¼Œ ä¸ç„¶æ˜¯æ— æ³•è¢«åå‘è§£æçš„ï¼Œè€Œä¸”åå‘è§£ææ—¶è¿˜ä¼šæŠ¥é”™
- åœ¨åå‘è§£æä¸­å¦‚æœä½¿ç”¨äº†namespaceé‚£å°±åªèƒ½ä½¿ç”¨ viewname='namespaece: name'çš„æ–¹å¼è¿›è¡Œæ–¹å‘è§£æï¼Œä¸å†ä½¿ç”¨viewname=è§†å›¾å‡½æ•°çš„æ–¹å¼è¿›è¡Œè§£æäº†
- å¦‚æœæ²¡æœ‰é…ç½®namspaceï¼Œ åªé…ç½®äºŒçº§è·¯ç”±çš„nameï¼Œ æ­¤æ—¶å¯ä»¥é€šè¿‡ viewname='name' æˆ–è€…  viewname = è§†å›¾å‡½æ•°çš„æ–¹å¼è¿›è¡Œæ–¹å‘è§£æï¼Œå½“å­˜åœ¨å¤šä¸ªäºŒçº§è·¯ç”±nameç›¸åŒæ—¶å€™ï¼Œè°åœ¨ä¸»è·¯ç”±ä¸­åå®šä¹‰ï¼Œè°ä¼˜å…ˆ

**ä¸‰ç§æ–¹å‘è§£æçš„æ–¹å¼**

- é…ç½®äº†namespace å’Œ nameçš„æ—¶å€™åªèƒ½é‡‡ç”¨viewname='namespaece: name'
- é…ç½®äº†nameçš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨viewname='name'      å’Œ            viewname = è§†å›¾å‡½æ•°çš„æ–¹å¼        
- æ²¡æœ‰é…ç½®nameçš„æ—¶å€™ï¼Œåªèƒ½é‡‡ç”¨viewname = è§†å›¾å‡½æ•°çš„æ–¹å¼   





#### 4ã€é€šè¿‡åˆ«ååå‘ç”Ÿæˆurl

![image-20220108180155169](image-20220108180155169.png)





#### 5ã€ä¸ä½¿ç”¨åˆ«åé€šè¿‡viewnameæ–¹å‘ç”Ÿæˆurl

**å‰ææ¡ä»¶ï¼šæ²¡æœ‰é…ç½®namespaceï¼Œ å¦‚æœé…ç½®äº†namespaceå°±ä¼šæŠ¥é”™äº†ã€‚ å‚çœ‹ç‚¹3ä¸­çš„æ³¨æ„ç‚¹**

![image-20220108172324209](image-20220108172324209.png)

**æ³¨æ„ç‚¹ï¼š**

- current_appè¿™ä¸ªå‚æ•°æˆ‘èƒ¡ä¹±æŒ‡å®šï¼Œä»–è¿˜æ˜¯èƒ½æ­£ç¡®é€†å‘è§£æ
- urlconf è¿™ä¸ªå¯ä»¥ä¸ç”¨æŒ‡å®šï¼Œä»–ä¼šæ‰¾åˆ°æˆ‘ä»¬çš„æ ¹åŸºè·¯ç”±åˆ†å‘æ¨¡å—.åº”è¯¥æ˜¯ä¹Ÿå¯ä»¥è¿›è¡Œè‡ªè¡Œå®šä¹‰çš„
- viewname æŒ‡å®šå¯¹åº”çš„è§†å›¾å‡½æ•°, ğŸ”ºä¸èƒ½æ˜¯è§†å›¾å‡½æ•°åçš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»æ˜¯è§†å›¾å‡½æ•°åã€‚ä¸ç„¶æ˜¯è¦æŠ¥é”™çš„
- retrun :  è¿”å›è·¯å¾„å­—ç¬¦  å¦‚æœ /login/xiaoduo/



**ç‰¹åˆ«æ³¨æ„ç‚¹:**

- å­˜åœ¨å¤šä¸ªè·¯ç”±æŒ‡å‘åŒä¸€ä¸ªè§†å›¾æ—¶ï¼Œå¦‚æœè¿™å¤šä¸ªè·¯ç”±éƒ½æœªæŒ‡å®šnamespaceåˆ«åçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡viewname=å‡½æ•°æ–¹å¼é€†å‘è§£æï¼Œä¼šè¿”å›urlpatternsä¸­åå®šä¹‰çš„åœ°å€

![image-20220108174049880](image-20220108174049880-16416370889321.png)

- å­˜åœ¨å¤šä¸ªè·¯ç”±æŒ‡å‘åŒä¸€ä¸ªè§†å›¾æ—¶ï¼Œå¦‚æœåœ¨å…¶ä¸­ä¸€ä¸ªè·¯ç”±æŒ‡å®šäº†namespeceçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡viewname=å‡½æ•°æ–¹å¼é€†å‘è§£æï¼Œä¼šè‡ªåŠ¨å‰”é™¤æŒ‡å®šäº†namespaceçš„è·¯ç”±ï¼Œæ‰¾åˆ°ä¸ä¹‹è§£æåŒ¹é…çš„åœ°å€

![image-20220108175307705](image-20220108175307705.png)

- é…ç½®nameæ²¡æœ‰é…ç½®namespaceçš„æ—¶å€™ï¼Œå¦‚æœå¤šä¸ªè·¯ç”±åˆ«åä¸€æ ·çš„æ—¶å€™ï¼Œåå­—åå®šä¹‰çš„

![image-20220306123201125](image-20220306123201125.png)



#### 6ã€åå‘è§£æä¼ å‚

![image-20220108211626288](image-20220108211626288.png)



![image-20220108221228989](image-20220108221228989.png)



- å¦‚æœé‡å®šå‘çš„é‡‡ç”¨çš„æ˜¯å…·ååˆ†ç»„ï¼Œreverseä¸­ä½¿ç”¨kwargsè¿›è¡Œä¼ å‚ï¼Œå¦‚æœé‡å®šå‘è·¯ç”±é‡‡ç”¨çš„æ—¶å€™åŒ¿ååˆ†ç»„ï¼Œä½¿ç”¨argsè¿›è¡Œä¼ å‚
- kwargså’Œargsä¸èƒ½æ··åˆä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™













# äº”ã€ä¿®æ”¹å·¥ç¨‹å

**å¤‡æ³¨ï¼š å°† newæ”¹æˆ django_config, è¿™æ ·æˆ‘ä»¬å¯ä»¥æ›´å¥½çš„çŸ¥é“è¿™æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶å¤¹**



![image-20220101160745657](image-20220101160745657.png)

#### 1ã€ä¿®æ”¹django_configç›®å½•ä¸‹çš„settingæ–‡ä»¶

**ROOT_URLCONF**

![image-20220101162340649](image-20220101162340649.png)



**WSGI_APPLICATION**

![image-20220101162425729](image-20220101162425729.png)





#### 2ã€ä¿®æ”¹django_configç›®å½•ä¸‹çš„wsgiæ–‡ä»¶

![image-20220101162542948](image-20220101162542948.png)



#### 3ã€ä¿®æ”¹manage.pyæ–‡ä»¶

![image-20220101162644491](image-20220101162644491.png)

































# å…­ã€è‡ªå®šä¹‰è·¯ç”±è§£æ

å…ˆçœ‹çœ‹djangoçš„æºç 

```python
# D:\Django\mysite\env\Lib\site-packages\django\urls\converters.py

import uuid
from functools import lru_cache


class IntConverter:
    regex = '[0-9]+'

    def to_python(self, value):
        return int(value)

    def to_url(self, value):
        return str(value)


class StringConverter:
    regex = '[^/]+'

    def to_python(self, value):
        return value

    def to_url(self, value):
        return value


class UUIDConverter:
    regex = '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}'

    def to_python(self, value):
        return uuid.UUID(value)

    def to_url(self, value):
        return str(value)


class SlugConverter(StringConverter):
    regex = '[-a-zA-Z0-9_]+'


class PathConverter(StringConverter):
    regex = '.+'


DEFAULT_CONVERTERS = {
    'int': IntConverter(),
    'path': PathConverter(),
    'slug': SlugConverter(),
    'str': StringConverter(),
    'uuid': UUIDConverter(),
}


REGISTERED_CONVERTERS = {}


def register_converter(converter, type_name):
    REGISTERED_CONVERTERS[type_name] = converter()
    get_converters.cache_clear()


@lru_cache(maxsize=None)
def get_converters():
    return {**DEFAULT_CONVERTERS, **REGISTERED_CONVERTERS}


def get_converter(raw_converter):
    return get_converters()[raw_converter]
```



#### 1ã€è‡ªå®šä¹‰è·¯ç”±è§£æè½¬æ¢å™¨ï¼ˆè½¬æ¢æ¨¡å—ä¸­è¿›è¡Œæ³¨å†Œï¼‰

**é¦–å…ˆï¼šæˆ‘ä»¬åœ¨æˆ‘ä»¬çš„APPä¸­åˆ›å»ºä¸€ä¸ªè½¬æ¢æ¨¡å—,é€šå¸¸è½¬æ¢æ¨¡å—çš„åå­—æˆ‘ä»¬ä¹Ÿä½¿ç”¨converters.pyï¼Œè¿™æ ·å¥½ç†è§£ï¼ˆè§å­—è¯†æ„ï¼‰**

**ç„¶åç¼–å†™æˆ‘ä»¬çš„è½¬æ¢ä»£ç ï¼Œè·Ÿdjangoçš„æºç ä¿æŒä¸€è‡´**

![image-20220101223743191](image-20220101223743191.png)

- to_python è½¬æ¢urlï¼Œé€šè¿‡æ­£åˆ™å»åŒ¹é…
- to_url: åå‘è§£æï¼Œåé¢ä»‹ç»

**ç„¶ååœ¨æˆ‘ä»¬çš„urls.pyä¸­å¯¼å…¥æˆ‘ä»¬çš„è½¬æ¢å™¨ã€‚å¯¼å…¥è½¬æ¢å™¨çš„ç›®çš„æ˜¯ä¸ºäº†æ‰§è¡Œæ³¨å†Œå‘½ä»¤ï¼Œåœ¨å¯¼å…¥æ¨¡å—çš„æ—¶å€™ï¼Œpythonä¼šæ‰§è¡Œæˆ‘ä»¬convertes.pyä¸­çš„æ³¨å†Œå‘½ä»¤ã€‚**

![image-20220101224558592](image-20220101224558592.png)

**ä½ åˆ«çœ‹è¿™ä¸ªå¯¼å…¥çš„æ¨¡å—æ˜¯ç°è‰²çš„ï¼Œæ²¡æœ‰ä»–ï¼Œæˆ‘ä»¬çš„ä»£ç å°±æŠ¥é”™äº†ã€‚æ‰€ä»¥å•Šï¼Œè¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªä¹ æƒ¯ä¸Šçš„é£é™©ï¼Œé‚£å°±æ˜¯å½“æˆ‘ä»¬çœ‹åˆ°è¿™äº›ç°è‰²çš„æ¨¡å—çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä»¥ä¸ºä»–æ²¡ç”¨ï¼Œå°±æƒ³ç»™ä»–åˆ äº†**





#### 2ã€è‡ªå®šä¹‰è·¯ç”±è§£æè½¬æ¢å™¨ï¼ˆåœ¨urls.pyä¸­è¿›è¡Œæ³¨å†Œï¼‰

**åœ¨urls.pyä¸­è¿›è¡Œæ³¨å†Œ**

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„convertes.pyä¸­çš„å¤šä½™ä»£ç æ¸…ç†ä»¥ä¸‹ï¼Œå¦‚ä¸‹ï¼Œé‡Œé¢å•¥éƒ½ä¸ç•™äº†ã€‚å°±ä¸€ä¸ªæ¨¡æ¿

![image-20220101224046601](image-20220101224046601.png)

æˆ‘ä»¬çœ‹çœ‹urls.py

![image-20220101224125178](image-20220101224125178.png)

è¿™æ—¶å€™å°±è¦å°†æˆ‘ä»¬çš„è½¬æ¢å™¨ï¼Œè¿˜æœ‰djangoçš„æ³¨å†Œå‡½æ•°å¼„è¿›æ¥äº†



#### 3ã€ç»ˆæå…¨å±€æ³¨å†Œ

**å¤‡æ³¨ï¼šä¸Šé¢ä¸¤ç§æ–¹å¼éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œè¦ä¹ˆå°±æ˜¯é€ æˆä¹¦å†™ä¸Šçš„ä¸è§„èŒƒï¼ˆå¯¼å…¥æ¨¡å—æœªä½¿ç”¨ï¼Œç½®ç°ï¼‰ï¼Œç¬¬äºŒä¸ªå°±æ˜¯å¤ç”¨æ€§ä¸é«˜ï¼Œåªèƒ½åœ¨å¯¼å…¥äº†è½¬æ¢å™¨çš„urlsä¸­ç”Ÿæ•ˆ**



**çœ‹çœ‹å‰é¢å­¦ä¹ çš„pymysqlçš„å¯¼å…¥ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨initæ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œï¼Œåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å°±ç»™ä»–æ³¨å†Œäº†**

![image-20220101224046601](image-20220101224046601.png)

**è½¬æ¢å™¨æ–‡ä»¶ä¿æŒå¦‚ä¸Š**



**åœ¨initæ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œ**

![image-20220101225549458](image-20220101225549458.png)

**è¿™æ ·æˆ‘ä»¬çš„å…¨å±€éƒ½èƒ½ä½¿ç”¨äº†**





# å…«ã€CSRFï¼ˆ403ï¼‰

**æµ…è°ˆï¼šCSRF**

https://zhuanlan.zhihu.com/p/22521378
