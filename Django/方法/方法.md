

## ä¸€ã€ç™»å½•éªŒè¯çš„è®¾è®¡

**ç¬¬ä¸€ç§æ€è·¯ï¼š**

æˆ‘ä»¬è®¿é—®ç™»å½•é¡µé¢çš„æ—¶å€™ï¼Œåç«¯ç”Ÿæˆä¸€ä¸ªéšæœºéªŒè¯ç ï¼Œå¹¶å°†è¿™ä¸ªéšæœºéªŒè¯ç æ”¾åˆ°cookieä¸­æ”¾å›ç»™å‰ç«¯ã€‚

å‰ç«¯æ‹¿åˆ°cookieä»¥åï¼Œé¡µé¢å±•ç¤ºè¦è¾“å…¥çš„cookie

ç”¨æˆ·è¾“å…¥æç¤ºçš„cookieæ”¾å›ç»™åç«¯ï¼Œåç«¯æ‹¿åˆ°ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç å’Œcookieä¸­éªŒè¯ç è¿›è¡Œæ¯”è¾ƒã€‚çœ‹æ˜¯å¦ä¸€è‡´ã€‚

ç¼ºç‚¹ï¼šå‰ç«¯å¯ä»¥ç›´æ¥çœ‹åˆ°è¿™ä¸ªcookieéªŒè¯ç ï¼Œå®Œå…¨å¯ä»¥æ¨¡æ‹Ÿï¼Œè¿˜å¯ä»¥æ”¹ï¼Œä¸å®‰å…¨

**ç¬¬äºŒç§æ€è·¯**

session





## äºŒã€ç¼“å­˜



https://blog.csdn.net/u012089823/article/details/88997277

**åœ¨`setttings.py`ä¸­é…ç½®**

```python
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379',
        "OPTIONS": {
            "CLIENT_CLASS": "django_redis.client.DefaultClient",
            "PASSWORD": ""
        },
    },
}
```

**æ•°æ®æ“ä½œ**

```python
from django.core.cache import cache
 
# å¦‚æœæ²¡æœ‰key_nameï¼Œåˆ™è¿”å›None
value = cache.get('key_name')
# timeout=Noneè¡¨ç¤ºè®¾ç½®æ°¸ä¹…æœ‰æ•ˆï¼Œå¦åˆ™ä¼ é€’ç§’çš„å€¼ï¼Œè¡¨ç¤ºè¿‡å¤šå°‘ç§’redisä¼šè‡ªåŠ¨æ¸…ç†è¿™ä¸ªkey
cache.set('key_name', value, timeout=None)
```





## ä¸‰ã€ é‡å®šå‘

å¯¼å…¥é‡å®šå‘æ¨¡å—

```python
from django.shortcuts import redirect
```

```python
def delete_new(request):
    path = request.path
    pattern = r'/news/delete_news/(?P<id>\d)'
    match_result = re.search(pattern, path)
    news_id = match_result.groupdict()['id']
    delete_news_content_by_id = News.objects.filter(id=news_id)
    print(delete_news_content_by_id)
    if delete_news_content_by_id:
        delete_news_content_by_id[0].is_deleted = True
        delete_news_content_by_id[0].save()
        return redirect(to='/news/index')
    # return render(request, template_name='news_content.html', context=news_context)
    return HttpResponse(content='æ•°æ®ä¸å­˜åœ¨ !!!!!!')
```

æºç 

```python
def redirect(to, *args, permanent=False, **kwargs):
    """
    å°† HttpResponseRedirect è¿”å›åˆ°ä¼ é€’çš„å‚æ•°çš„é€‚å½“ URLã€‚
    è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯
        ä¸€ä¸ªæ¨¡å—ï¼šè¿™ä¸ªæ¨¡å—çš„`get_absolute_url()` å‡½æ•°å°†è¢«è°ƒç”¨ã€‚
        è§†å›¾åç§°ï¼Œå¯èƒ½å¸¦æœ‰å‚æ•°ï¼š`urls.reverse()` å°†ç”¨äºåå‘è§£æåç§°ã€‚
        ä¸€ä¸ª URLï¼Œå°†æŒ‰åŸæ ·ç”¨äºé‡å®šå‘ä½ç½®ã€‚
    é»˜è®¤æƒ…å†µä¸‹å‘å‡ºä¸´æ—¶é‡å®šå‘ï¼›
    é€šè¿‡ Permanent=True å‘å‡ºæ°¸ä¹…é‡å®šå‘
    resolve_url ï¼š j
    """
    redirect_class = HttpResponsePermanentRedirect if permanent else HttpResponseRedirect
    return redirect_class(resolve_url(to, *args, **kwargs))
```



#### 1ã€ç®€å•ä½¿ç”¨

```python
from django.shortcuts import redirect
```

**301: ä¸´æ—¶é‡å®šå‘**ï¼š ğŸ”ºä¸»æœºåŸŸåæ²¡æœ‰å‘ç”Ÿæ”¹å˜

**302ï¼šæ°¸ä¹…é‡å®šå‘**ï¼š ğŸ”ºä¸»æœºåŸŸåéƒ½å‘é€äº†æ”¹å˜

æºç ä¸€ä¸‹ï¼š

```python
def redirect(to, *args, permanent=False, **kwargs):
    """
    å°† HttpResponseRedirect è¿”å›åˆ°ä¼ é€’çš„å‚æ•°çš„é€‚å½“ URLã€‚
    è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯
        ä¸€ä¸ªæ¨¡å—ï¼šè¿™ä¸ªæ¨¡å—çš„`get_absolute_url()` å‡½æ•°å°†è¢«è°ƒç”¨ã€‚  æ¯”å¦‚ resolve_url æ¨¡æ¿ï¼ˆä»–ä»¬æ˜¯é»„é‡‘æ­æ¡£ï¼‰
        è§†å›¾åç§°ï¼Œå¯èƒ½å¸¦æœ‰å‚æ•°ï¼š`urls.reverse()` å°†ç”¨äºåå‘è§£æåç§°ï¼Œæ¯”å¦‚to=loginè§†å›¾
        ä¸€ä¸ª URLï¼Œå°†æŒ‰åŸæ ·ç”¨äºé‡å®šå‘ä½ç½®ã€‚ è¿™ä¸ªå°±æ˜¯æœ€ç®€å•çš„äº†
    é»˜è®¤æƒ…å†µä¸‹å‘å‡ºä¸´æ—¶é‡å®šå‘ï¼›
    é€šè¿‡ Permanent=True å‘å‡ºæ°¸ä¹…é‡å®šå‘
    """
    redirect_class = HttpResponsePermanentRedirect if permanent else HttpResponseRedirect
    return redirect_class(resolve_url(to, *args, **kwargs))
```

- ```python
	return redirect(to='/')				# ä¸´æ—¶é‡å®šå‘åˆ°127.0.0.1ï¼š8080/,y
	```

- ```
	return redirect(to='/news/xxx')		# é‡å®šå‘åˆ°å…¶ä»–åœ°æ–¹ï¼Œæ ¹æ®url
	```

	

