ğŸ”ºGitä¸ä»…ä»…æ˜¯å¿½ç•¥ç©ºç›®å½•ã€‚ å®ƒæ˜¯å¿½ç•¥æ‰€æœ‰ç›®å½•ã€‚ åœ¨Gitä¸­ï¼Œç›®å½•ä»…é€šè¿‡å…¶å†…å®¹éšå¼å­˜åœ¨ã€‚ ç©ºç›®å½•æ²¡æœ‰å†…å®¹ï¼Œå› æ­¤ä¸å­˜åœ¨ã€‚



**Gitæš‚å­˜åŒºæ˜¯å¦éœ€è¦æ‰§è¡Œcommitæäº¤ï¼Œæ˜¯é€šè¿‡å½“å‰æš‚å­˜åŒºä¸æäº¤å¯¹è±¡æš‚å­˜åŒºå¯¹æ¯”æ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­çš„ï¼Œä¸€è‡´ä¸æç¤ºcommitï¼Œä¸ä¸€è‡´æç¤ºéœ€è¦commit**

**Gitå·¥ä½œåŒºæ˜¯å¦éœ€è¦è¢«æš‚å­˜ï¼Œæ˜¯é€šè¿‡å·¥ä½œåŒºå‡å®šç”Ÿäº§çš„æš‚å­˜åŒºä¸å½“å‰æš‚å­˜åŒºæ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­ï¼Œä¸€è‡´ä¸æç¤ºaddæš‚å­˜ï¼Œä¸ä¸€è‡´æç¤ºéœ€è¦addæš‚å­˜**



**ğŸ”º git checkout ä¸»è¦æ˜¯ç”¨äºç§»åŠ¨HEAD,å³.gitç›®å½•ä¸‹  HEADçš„å€¼ï¼Œrefs/branchs  ä¸­çš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ—¢ç„¶ä¸å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆgit lol æ—¶å€™ï¼Œåªæœ‰HEADåœ¨ç§»åŠ¨ï¼Œåˆ†æ”¯éƒ½æ²¡æœ‰åŠ¨ï¼Œå› ä¸ºrefs/branchs  ä¸­çš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™ï¼Œä¼šå‘ç°å…¶ä»–åˆ†æ”¯ä¾æ—§å­˜åœ¨ã€‚ã€‚ğŸ”ºå…¶ä¸­git      checkout commitid filename çš„æ—¶å€™ï¼Œå®ƒä¸ä¼šæ”¹å˜refs/branchsä¸­çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨æ¥è¿›è¡Œå·¥ä½œåŒºå›æ»šæˆ–è€…åæ‚”**

**ğŸ”ºgit reset --hard / --mixed /--soft  æ”¹å˜refs/branchs ä¸­çš„å€¼ï¼Œç”±äº.gitç›®å½•ä¸‹ HEADæ–‡ä»¶ä¸­çš„å€¼æŒ‡å‘refs/branchsä¸­çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ï¼Œåˆ†æ”¯æ”¹å˜ï¼Œå¸¦ç€HEADä¸€èµ·ç§»åŠ¨**

## GIT

**å­¦GITä¸¤æ¡ä¸»çº¿**

> - â€‹	**ä¸‰ä¸ªåŒºåŸŸï¼ˆä¸‰æ£µæ ‘ï¼‰**
> 	- **å·¥ä½œåŒº**
> 	- **æš‚å­˜åŒº**
> 	- **ç‰ˆæœ¬åº“**
> - â€‹    **ä¸‰ä¸ªå¯¹è±¡**
> 	- **gitå¯¹è±¡**
> 	- **æ ‘å¯¹è±¡**
> 	- **æäº¤å¯¹è±¡**

æ€»ç»“ï¼š

1.æ–‡ä»¶å†…å®¹å‘ç”Ÿæ”¹å˜ï¼Œç”Ÿæˆæ–°çš„GITå¯¹è±¡ï¼Œæ ‘å¯¹è±¡ï¼Œæäº¤å¯¹è±¡

2.æ–‡ä»¶åå­—å‘ç”Ÿæ”¹å˜ï¼Œç”Ÿæˆæ–°çš„æ ‘å¯¹è±¡ï¼Œæäº¤å¯¹è±¡ï¼ŒGITå¯¹è±¡ä¸å˜

3.åˆ‡æ¢åˆ†æ”¯æˆ–è€…åˆšå…‹éš†ä¸‹æ¥çš„é¡¹ç›®ï¼Œå·¥ä½œåŒºçš„å†…å®¹å’Œæš‚å­˜åŒºçš„ç´¢å¼•ä¸€ä¸€å¯¹åº”ï¼Œæš‚å­˜åŒºå­˜æ”¾çš„å°±æ˜¯å½“å‰ç‰ˆæœ¬

4.åˆ‡æ¢åˆ†æ”¯ï¼Œå°±æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸åŒåˆ†æ”¯çš„ä¸åŒæäº¤å¯¹è±¡ï¼ŒæŒ‡é’ˆæ‰€æŒ‡æäº¤å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œæš‚å­˜å»çš„å†…å®¹ä¹Ÿå‘ç”Ÿå¯¹åº”çš„å˜åŒ–



5. gitå¯¹è±¡ -- æš‚å­˜åŒº -- æ ‘å¯¹è±¡ -- æäº¤å¯¹è±¡ -- HEADæŒ‡é’ˆ

6.åˆ é™¤ä¸€ä¸ªå·¥ä½œåŒºçš„æ–‡ä»¶ï¼Œç„¶åadd commit ä¹‹åï¼Œæš‚å­˜åŒºçš„ç´¢å¼•ä¹Ÿä¼šä¸¢å¤±ï¼Œä¼šç”Ÿæˆæ–°çš„æäº¤å¯¹è±¡ï¼Œè€Œobjectç‰ˆæœ¬åº“ä¸­çš„gitå¯¹è±¡ä¸ä¼šåˆ é™¤





**ä¾‹å­ï¼šåˆå§‹ä»“åº“ - æ–°å»ºtest.txtæ–‡ä»¶ - æ·»åŠ test.txt v1 å­—ç¬¦ä¸²å†…å®¹ï¼Œ git add .  git commit åæŸ¥çœ‹GITå¯¹è±¡å†…å®¹ï¼Œæ ‘å¯¹è±¡å†…å®¹ï¼Œæäº¤å¯¹è±¡å†…å®¹ï¼Œæš‚å­˜åŒºå†…å®¹**

**gitå¯¹è±¡å†…å®¹å¦‚ä¸‹:**

```bash
$ git cat-file -p 560a3d89bf36ea10794402f6664740c284d4ae3b
test.txt v1
```

**æ ‘å¯¹è±¡å†…å®¹å¦‚ä¸‹:**

```bash
$ git cat-file -p 06e21bb0105e2de6c846725a9a7172f57dd1af96
100644 blob 560a3d89bf36ea10794402f6664740c284d4ae3b    test.txt
```

**æäº¤å¯¹è±¡å†…å®¹å¦‚ä¸‹:**

```bash
$ git cat-file -p bc11e086c64f0fffc42e85b8c7de2f35cea5c4f4
tree 06e21bb0105e2de6c846725a9a7172f57dd1af96
author zmz <1054920870@qq.com> 1622364162 +0800
committer zmz <1054920870@qq.com> 1622364162 +0800

first-comit
```

**æœ€åæš‚å­˜åŒºå†…å®¹å¦‚ä¸‹:**

```bash
$ git ls-files -s
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0       test.txt
```



## ä¸€ã€gitå¯¹è±¡

`GITçš„æ ¸å¿ƒéƒ¨åˆ†å°±æ˜¯ä¸€ä¸ªç®€å•çš„é”®å€¼å¯¹æ•°æ®åº“ã€‚ä½ å¯ä»¥å‘è¯¥æ•°æ®åº“æ’å…¥ä»»æ„ç±»å‹çš„å†…å®¹ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªé”®å€¼ï¼Œé€šè¿‡è¯¥é”®å€¼å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»å†æ¬¡ æ£€ç´¢è¯¥å†…å®¹`



### 1.1	GITæ•°æ®åº“

**æ•°æ®åº“è·¯å¾„:\\.git\objects**

![](GITæœ¬åœ°æ•°æ®åº“.png)



### 1.1	å‘ç‰ˆæœ¬åº“å†™å…¥å†…å®¹ï¼Œå¹¶è¿”å›å¯¹åº”çš„é”®å€¼

**å‘½ä»¤ï¼š**`echo 'test content' | git hash-object -w --stdin`

> - â€‹	`-w` é€‰é¡¹ï¼Œ å®ƒæŒ‡ç¤ºhash-object å‘½ä»¤å­˜å‚¨æ•°æ®å¯¹è±¡ï¼›è‹¥ä¸æŒ‡å®šæ­¤é€‰é¡¹ï¼Œåˆ™è¯¥å‘½ä»¤ä»…è¿”å›å¯¹åº”çš„é”®å€¼ï¼Œä¸ä¼šè¿›è¡Œå­˜å‚¨`å­˜å‚¨ä½ç½®\\.git\objects`
> -    `--stdin`é€‰é¡¹ï¼Œ å®ƒæŒ‡ç¤ºè¯¥å‘½ä»¤ä»æ ‡å‡†è¾“å…¥è¯»å–å†…å®¹ï¼›è‹¥ä¸æŒ‡å®šæ­¤é€‰é¡¹ï¼Œåˆ™é¡»åœ¨å‘½ä»¤å°¾éƒ¨ç»™å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è¡¨ç¤ºéœ€è¦å­˜å…¥gitæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæ¥æºäºè¿™ä¸ªæ–‡ä»¶ï¼Œè¯´ç™½äº†å°±æ˜¯å°†è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­
> 	- `git hash-object -w æ–‡ä»¶è·¯å¾„`
> 		- å­˜æ–‡ä»¶
> 	- `git hash-object æ–‡ä»¶è·¯å¾„`
> 		- è¿”å›å¯¹åº”çš„é”®å€¼
> 		- d6704 60b4 b42aec5915....., ğŸ”ºè¿™ä¸ªå“ˆå¸Œå°±æ˜¯é”®ï¼Œ å¯¹åº”çš„å°±æ˜¯ 'test content'è¿™ä¸ªå€¼
> 			- d6æ˜¯objectæ•°æ®ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œ d6åé¢çš„æ•°æ®å°±æ˜¯d6ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å­˜æ”¾äº†'test content'è¿™ä¸ªæ•°æ®ã€‚ã€‚è¿™å°±æ˜¯gitçš„å­˜å‚¨æ–¹å¼



### 1.2	æ ¹æ®é”®å€¼æ‹‰å–æ•°æ®

**å‘½ä»¤ï¼š**`git cat-file -p å“ˆå¸Œå€¼`  -- è¯»å€¼

**å‘½ä»¤ï¼š**`git cat-file -t å“ˆå¸Œå€¼`  -- æŸ¥çœ‹ç±»å‹

**å‘½ä»¤ï¼š`git cat-file -p/-t HEAD` --è¯»å–/æŸ¥çœ‹å½“å‰æäº¤å¯¹è±¡çš„å†…å®¹**

**ä½œç”¨ï¼šç”±äºå­˜å…¥çš„æ•°æ®æ˜¯å‹ç¼©è¿‡çš„ï¼Œé€šè¿‡`git cat-file -p å“ˆå¸Œå€¼`å‘½ä»¤è§£å‹æ‰èƒ½çœ‹å¾—æ‡‚**

> - â€‹	`-p`é€‰é¡¹å¯æŒ‡ç¤ºè¯¥å‘½ä»¤è‡ªåŠ¨åˆ¤æ–­å†…å®¹çš„ç±»å‹ï¼Œå¹¶ä¸ºæˆ‘ä»¬æ˜¾ç¤ºæ ¼å¼ğŸ”ºç›¸å¯¹å‹å¥½çš„å†…å®¹ï¼ˆåŸºæœ¬è¿˜æ˜¯çœ‹ä¸æ‡‚-å“ˆå“ˆï¼‰ï¼Œè¿”å›æ–‡ä»¶çš„å†…å®¹
> - â€‹    ğŸ”º`å“ˆå¸Œå€¼` = `objectä¸­çš„æ–‡ä»¶å¤¹` + `è¿™ä¸ªæ–‡ä»¶ä¸­å¯¹åº”çš„æ–‡ä»¶å`
> - â€‹    `-t` å¯ä»¥æŸ¥çœ‹å†…å®¹æ˜¯ä¸€ä¸ªä»€ä¹ˆå¯¹è±¡
> 	- gitå†…éƒ¨æ˜¯ä¸€ä¸ª`blob`å¯¹è±¡ï¼Œæ˜¯gitè‡ªå®šä¹‰çš„ä¸€ä¸ªæ•°æ®ç±»å‹



### 1.3	gitå¯¹è±¡æ€»ç»“

ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºGité€šè¿‡å“ˆå¸Œå€¼æ¥è®°å½•æ¯ä¸€æ¬¡æ–‡ä»¶çš„æ”¹å˜ï¼Œä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿå› ä¸ºå½“æˆ‘ä»¬æ–‡ä»¶åä¸å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¿®æ”¹é‡Œé¢çš„å†…å®¹ï¼Œè¿™æ—¶å€™å°±æ˜¯ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬äº†ï¼Œå¦‚æœé€šè¿‡ä¿®æ”¹æ–‡ä»¶åçš„æ–¹å¼æ¥è®°å½•ï¼Œé‚£ä¸è·Ÿæˆ‘ä»¬è‡ªå·±å¤‡ä»½è®°å½•ä¸€æ ·äº†å•Šã€‚è¿™ä¸ªæ—¶å€™gitå¼€å‘è€…æƒ³åˆ°ï¼Œå¯ä»¥é€šè¿‡å“ˆå¸Œå€¼æ¥ç»™æ–‡ä»¶å‘½ä»¤ï¼Œå› ä¸ºåªè¦ä¸¤ä¸ªæ–‡ä»¶ä¸ä¸€æ ·ï¼Œå“ˆå¸Œå€¼å°±ä¸ä¸€æ ·ã€‚å…¶å®gitå¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶è€Œå·²ï¼ˆæ ‘å¯¹è±¡ä¹Ÿæ˜¯ï¼‰ï¼Œå°±æ˜¯å½“æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œå“ˆå¸Œå€¼ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œé€šè¿‡è¿™ä¸ªå“ˆå¸Œå€¼æ¥ç»™æ–‡ä»¶é‡æ–°å‘½åï¼Œè¿›è¡Œç®¡ç†çš„ï¼Œè€Œä¸”è¿˜å°†åŸæ¥çš„æ–‡ä»¶å†…å®¹è¿›è¡Œæè‡´çš„å‹ç¼©ã€‚ã€‚ä¸å…‰æ˜¯gitå¯¹è±¡ï¼Œæ ‘å¯¹è±¡ä¹Ÿä¸€æ ·ã€‚ã€‚ã€‚å…¶å®gitå¯¹è±¡å’Œæ ‘å¯¹è±¡ï¼Œä¸èƒ½å«å¯¹è±¡ï¼Œå°±æ˜¯ä¸€ä¸ªä¸ªæ–‡ä»¶ã€‚ã€‚gitå¯¹è±¡ï¼Œæ–‡ä»¶åæ˜¯å“ˆå¸Œï¼Œå†…å®¹æ˜¯å‹ç¼©è¿‡çš„æ–‡ä»¶å†…å®¹ã€‚ã€‚æ ‘å¯¹è±¡ï¼Œæ–‡ä»¶åæ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªå“ˆå¸Œï¼Œå†…å®¹å‹ç¼©è¿‡çš„ç´¢å¼•å†…å®¹ï¼Œä½ æ²¡å¬é”™ï¼Œæ ‘æ–‡ä»¶ä¸­å­˜çš„åªæ˜¯ç´¢å¼•å…³ç³»

**é—®é¢˜ï¼š**

1. â€‹	è®°ä½æ–‡ä»¶çš„æ¯ä¸€ä¸ªç‰ˆæœ¬å¯¹åº”çš„SHA-1 å€¼æ˜¯ä¸ç°å®çš„
2. â€‹    åœ¨Gitä¸­ï¼Œæ–‡ä»¶åå¹¶æ²¡æœ‰è¢«ä¿å­˜ --- æˆ‘ä»¬ä»…ä¿å­˜äº†æ–‡ä»¶çš„å†…å®¹ï¼ˆæ–‡ä»¶å˜åŒ–gitå¯¹è±¡æ–‡ä»¶çš„æ–‡ä»¶åä¹Ÿå˜åŒ–äº†ã€‚åŸå§‹åå­—è¢«æ›¿æ¢æˆäº†SHA-1ï¼‰
3. â€‹    ğŸ”ºä¸€ä¸ªGitå¯¹è±¡åªä»£è¡¨ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹
4. â€‹    <font color='red'>è§£å†³æ–¹æ¡ˆ:æ ‘å¯¹è±¡</font>





## äºŒã€æ ‘å¯¹è±¡

`æ ‘å¯¹è±¡ï¼ŒğŸ”ºï¼ˆå®˜æ–¹è§£ç­”ï¼‰å®ƒèƒ½è§£å†³æ–‡ä»¶åä¿å­˜çš„é—®é¢˜ğŸ”ºï¼Œä¹Ÿå…è®¸æˆ‘ä»¬å°†å¤šä¸ªæ–‡ä»¶ç»„ç»‡åˆ°ä¸€èµ·ï¼ˆå¤šä¸ªç´¢å¼•ï¼‰ã€‚Gitä»¥ä¸€ç§ç±»ä¼¼äºUNIXæ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼å­˜å‚¨å†…å®¹ã€‚æ‰€æœ‰å†…å®¹å‡ä»¥æ ‘å¯¹è±¡åŠ æ•°æ®å¯¹è±¡ï¼ˆgitå¯¹è±¡ï¼‰çš„å½¢å¼å­˜å‚¨ï¼Œå…¶ä¸­æ ‘å¯¹è±¡å¯¹åº”äº†UNIXä¸­çš„ğŸ”ºç›®å½•é¡¹ï¼ˆç´¢å¼•ï¼‰ğŸ”ºï¼Œæ•°æ®å¯¹è±¡ï¼ˆGitï¼‰å¯¹è±¡åˆ™å¤§è‡´ä¸Šå¯¹åº”æ–‡ä»¶å†…å®¹ã€‚ä¸€ä¸ªæ ‘å¯¹è±¡åŒ…å«äº†ä¸€æ¡æˆ–å¤šæ¡è®°å½•ï¼ˆæ¯æ¡è®°å½•å«æœ‰ä¸€ä¸ªæŒ‡å‘gitå¯¹è±¡æˆ–è€…å­æ ‘å¯¹è±¡çš„SHA-1æŒ‡é’ˆï¼Œä»¥åŠç›¸åº”çš„æ¨¡å¼ã€ç±»å‹ã€æ–‡ä»¶åä¿¡æ¯ï¼‰ã€‚ä¸€ä¸ªæ ‘å¯¹è±¡ä¹Ÿå¯ä»¥åŒ…å«å¦å¤–ä¸€ä¸ªæ ‘å¯¹è±¡`





### 2.1	æ„å»ºæ ‘å¯¹è±¡ï¼ˆæš‚å­˜åŒºå°±æ˜¯ä¸€æ£µæ ‘ï¼Œç»™æš‚å­˜åŒºæ‹ä¸ªå¿«ç…§ï¼Œå°±æ˜¯å°†æš‚å­˜åŒºçš„å†…å®¹ï¼ˆç´¢å¼•å…³ç³»ï¼‰ä»¥æ ‘çš„å½¢å¼å­˜å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶å½“ä¸­ï¼ˆä¹Ÿå«ç”Ÿæˆæ ‘å¯¹è±¡ï¼‰ï¼Œæ–‡ä»¶åæ˜¯ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œå†…å®¹å°±æ˜¯æš‚å­˜åŒºçš„å†…å®¹ï¼‰

`æˆ‘ä»¬å¯ä»¥é€šè¿‡update-indexï¼›write-tree;read-treeç­‰å‘½ä»¤æ¥æ„å»ºæ ‘å¯¹è±¡å¹¶å¡å…¥åˆ°ğŸ”ºæš‚å­˜åŒº`

**ğŸ”ºå‘½ä»¤ï¼šæŸ¥çœ‹æš‚å­˜åŒºå½“å‰çš„æ ·å­**

```bash
git ls-files -s
```

**ğŸ”ºå‘½ä»¤ï¼šæŸ¥çœ‹ç‰ˆæœ¬åº“ä¸­çš„å¿«ç…§**

```bash
find ./.git/objects/ -type f
```

**ğŸ”ºå‘½ä»¤ï¼šæŸ¥çœ‹å“ˆå¸Œå€¼çš„ç±»å‹**

```bash
git cat-file -p å“ˆå¸Œï¼ˆå“ˆå¸Œ==å¯¹è±¡==å¿«ç…§ï¼‰
```

**ğŸ”ºå‘½ä»¤ï¼šæŸ¥çœ‹å“ˆå¸Œå€¼çš„å†…å®¹**

```bash
git cat-file -t å“ˆå¸Œï¼ˆå“ˆå¸Œ==å¯¹è±¡==å¿«ç…§ï¼‰
```



### 2.2	å®æˆ˜æ„å»ºæ ‘å¯¹è±¡ï¼ˆä¸€æ•´ä¸ªæµç¨‹ï¼Œå®Œå…¨æ•è·æ•´ä¸ªç‰ˆæœ¬ç®¡ç†çš„è¿‡ç¨‹ï¼‰



#### **æ“ä½œ--1ï¼šæ–°å¢ä¸€ä¸ªtest.txtæ–‡ä»¶ï¼Œç”¨å®ƒçš„å†…å®¹ç”Ÿæˆä¸€ä¸ªGitå¯¹è±¡**

```
echo 'test.txt v1' > test.txt	# åˆ›å»ºtext.txt çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬
git hash-object -w test.txt		# ç”Ÿæˆgitå¯¹è±¡
```

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹

```bash
$ find ./.git/objects/ -type f	#objectç‰ˆæœ¬åº“
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	# test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:(ä¸ºç©º)

```bash
$ git ls-files -s			# æš‚å­˜åŒº

```









#### **æ“ä½œ---2ï¼šæŠŠtext.txtçš„Gitå¯¹è±¡åœ¨æš‚å­˜åŒºä¸­å»ºç«‹ä¸€ä¸ªç´¢å¼•å…³ç³»**

`åˆ©ç”¨update-indexå‘½ä»¤ ä¸ºtest.txt æ–‡ä»¶çš„é¦–ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºå»ºç«‹ä¸€ä¸ªç´¢å¼•å…³ç³»ã€‚å¹¶é€šè¿‡write-treeå‘½ä»¤ï¼Œåˆ©ç”¨æš‚å­˜åŒºçš„ç´¢å¼•å…³ç³»ç”Ÿæˆä¸€ä¸ªæ ‘å¯¹è±¡å­˜å…¥objectç‰ˆæœ¬åº“ä¸­`



**æ“ä½œ2.1ï¼š æš‚å­˜åŒºä¸­å»ºç«‹ç´¢å¼•**

**å‘½ä»¤: `git update-index --add --cacheinfo 10064 560a3d89bf36ea10794402f6664740c28 test.txt `**

**ğŸ”ºå¤‡æ³¨ï¼šå°†objectsåº“é‡Œé¢çš„gitå¯¹è±¡æ”¾å…¥æš‚å­˜åŒºï¼Œå¹¶ç»™å®ƒä¸€ä¸ªåˆ«åä½œç´¢å¼•,å»ºç«‹ç´¢å¼•å…³ç³»ï¼Œè¿™ä¸ªç´¢å¼•åˆ«åå¿…é¡»å”¯ä¸€ï¼Œä¸ç„¶è¦†ç›–ï¼Œä½†æ˜¯æ­¤æ—¶objectç‰ˆæœ¬æ•°æ®åº“ä¸­è¿˜æ²¡æœ‰è®°å½•ï¼Œè¿˜åœ¨æš‚å­˜åŒºä¸­ï¼ˆè¢«ç‰ˆæœ¬æ•°æ®åº“objectè®°å½•ä»¥åæ‰ç®—è¢«gitç®¡ç†ï¼‰**

> 1. **æ–‡ä»¶æ¨¡å¼**
> 	1. 100644, è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶
> 	2. 100755ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶
> 	3. 120000, è¡¨ç¤ºä¸€ä¸ªç¬¦å·è¿æ¥
> 2. **`--addé€‰é¡¹`**
> 	1. ğŸ”ºå› ä¸ºæ­¤å‰è¯¥ç´¢å¼•æ–‡ä»¶åå¹¶ä¸å†æš‚å­˜åŒºä¸­ï¼Œ é¦–æ¬¡éœ€è¦`--add`æ·»åŠ åˆ°æš‚å­˜åŒº
> 3. **`--cacheinfoé€‰é¡¹`**
> 	1. å› ä¸ºå°†è¦æ·»åŠ çš„æ–‡ä»¶ä½äºGitæ•°æ®åº“ä¸­ï¼Œè€Œä¸æ˜¯ä½äºå½“å‰ç›®å½•ä¸‹ï¼Œæ‰€ä»¥éœ€è¦ `cacheinfo`

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹ï¼ˆä¸å˜ï¼‰

```bash
$ find ./.git/objects/ -type f	#objectç‰ˆæœ¬åº“
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b		# test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:

```bash
$ git ls-files -s	#æš‚å­˜åŒº
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0      test.txt	# test.txtç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ä¸test.txtç´¢å¼•åçš„å…³ç³»
```











**æ“ä½œ2.2**ï¼š**å°†æš‚å­˜åŒºæ‹ä¸€ä¸ªå¿«ç…§ï¼ˆä»¥æ ‘çš„å½¢å¼å­˜å…¥æ–‡ä»¶ä¸­ï¼Œä¹Ÿå«ç”Ÿæˆæ ‘å¯¹è±¡ï¼‰ï¼Œå­˜å…¥objectsç‰ˆæœ¬åº“ä¸­**

**å‘½ä»¤ï¼š`git write-tree`**ï¼ˆä¸ä¼šæ¸…ç©ºæš‚å­˜åŒºï¼‰

**å¤‡æ³¨ï¼šç›¸å½“äºç»™æš‚å­˜åŒºæ‹ä¸€ä¸ªå¿«ç…§ï¼Œè¿™ä¸ªå¿«ç…§æ˜¯ä¸€ä¸ªæ ‘å¯¹è±¡ï¼Œç”¨ä¸€ä¸²å“ˆå¸Œå€¼è¡¨ç¤ºè¿™ä¸ªæ ‘å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªæ ‘å¯¹è±¡ï¼ˆå¿«ç…§ï¼‰å­˜å…¥objectsç‰ˆæœ¬æ•°æ®åº“ä¸­ã€‚write-treeè¿˜ä¼šè¿”å›è¿™ä¸ªæ ‘å¯¹è±¡ï¼ˆå“ˆå¸Œå€¼ï¼‰**

**ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºåªæœ‰objectç‰ˆæœ¬æ•°æ®ç©ºä¸­è®°å½•çš„æ‰æ˜¯è¢«gitç®¡ç†çš„**

**ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºGitå¯¹è±¡ä»£è¡¨æ–‡ä»¶çš„ä¸€æ¬¡æ¬¡ç‰ˆæœ¬ï¼Œtreeå¯¹è±¡ä»£è¡¨é¡¹ç›®çš„ä¸€æ¬¡æ¬¡ç®¡ç†**

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹ï¼ˆä¸å˜ï¼‰

```bash
$ find ./.git/objects/ -type f	# objectç‰ˆæœ¬åº“
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:

```bash
$ git ls-files -s	#æš‚å­˜åŒº
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0    test.txt   # test.txtç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ä¸test.txtç´¢å¼•åçš„å…³ç³»
```





#### **æ“ä½œ---3ï¼šæ–°å¢new.txtå’Œtest.txt æ–‡ä»¶çš„ç¬¬äºŒä¸ªç‰ˆæœ¬å¡å…¥æš‚å­˜åŒºã€‚å¹¶é€šè¿‡write-treeå‘½ä»¤ ç”Ÿæˆæ ‘å¯¹è±¡**

**æ“ä½œ3-1ï¼šæ–°å¢new.txtï¼Œç”ŸæˆGitå¯¹è±¡**

```bash
echo 'new file' > new.txt
git hash-object -w new.txt
```

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹

```bash
$ find ./.git/objects/ -type f
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/ea/e614245cc5faa121ed130b4eba7f9afbcc7cd9	#	new.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:

```bash
$ git ls-files -s	#æš‚å­˜åŒº
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0    test.txt   # test.txtç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ä¸test.txtç´¢å¼•åçš„å…³ç³»
```





**æ“ä½œ3-2ï¼šä¿®æ”¹test.txtä¸­çš„å†…å®¹ï¼Œç„¶åç”Ÿæˆgitå¯¹è±¡**

```bash
echo 'text.txt v2' >> text.txt	# ç»™text.txtä¸­è¿½åŠ å†™å…¥  text.txt v2æ•°æ®
git hash-object -w new.txt
```

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹

```bash
$ find ./.git/objects/ -type f
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/ea/e614245cc5faa121ed130b4eba7f9afbcc7cd9	#	new.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/c3/1fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba	#	test.txtæ–‡ä»¶çš„ç¬¬äºŒä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:

```bash
$ git ls-files -s	#æš‚å­˜åŒº
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0    test.txt   # test.txtç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ä¸test.txtç´¢å¼•åçš„å…³ç³»
```



**æ“ä½œ3-3ï¼šå†æ¬¡é€šè¿‡update-indexå’Œwrite-treeç”Ÿæˆæ ‘å¯¹è±¡**

**3-3-1 å…ˆå°†test.txtçš„ç¬¬äºŒæ¬¡ç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­å»ºç«‹ç´¢å¼•**

**å‘½ä»¤ï¼š`git update-index --cacheinfo 100644 c31fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba test.txt `**

> 1. â€‹	ç”±äºtest.txtè¿™ä¸ªç´¢å¼•åˆ«åå·²ç»å­˜åœ¨äºæš‚å­˜åŒºäº†ï¼Œæ­¤æ—¶ä¸éœ€è¦`--add`

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹

```bash
$ find ./.git/objects/ -type f
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/ea/e614245cc5faa121ed130b4eba7f9afbcc7cd9	#	new.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/c3/1fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba	#	test.txtæ–‡ä»¶çš„ç¬¬äºŒä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:ï¼ˆå‘ç”Ÿæ”¹å˜ï¼‰

```bash
$ git ls-files -s
100644 c31fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba 0       test.txt # test.txtç¬¬äºŒä¸ªç‰ˆæœ¬å¿«ç…§ä¸test.txtç´¢å¼•åçš„å…³ç³»ï¼Œè¦†ç›–ä»¥å‰çš„
```



**3-3-2 å°†new.txtçš„ç¬¬ä¸€æ¬¡ç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­å»ºç«‹ç´¢å¼•**

**å‘½ä»¤ï¼š`git update-index --add --cacheinfo 100644 eae614245cc5faa121ed130b4eba7f9afbcc7cd9 new.txt `**

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹

```bash
$ find ./.git/objects/ -type f
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/ea/e614245cc5faa121ed130b4eba7f9afbcc7cd9	#	new.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/c3/1fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba	#	test.txtæ–‡ä»¶çš„ç¬¬äºŒä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
```

æ­¤æ—¶`git ls-files -s`æŸ¥çœ‹æš‚å­˜åŒºå¦‚ä¸‹:ï¼ˆæ·»åŠ new.txtçš„å¿«ç…§åˆ°æš‚å­˜åŒºï¼Œå¹¶å»ºç«‹ç´¢å¼•ï¼‰

```bash
$ git ls-files -s
100644 eae614245cc5faa121ed130b4eba7f9afbcc7cd9 0       new.txt
100644 c31fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba 0       test.txt
```



**3-3-3 ç»™æš‚å­˜åŒºæ‹ä¸ªå¿«ç…§ï¼Œå­˜å…¥objectç‰ˆæœ¬åº“**

**å‘½ä»¤:git write-tree**

```bash
$ git write-tree
9d74ec4055e0f1edc1921d749c250380ca7b5ebd
```

æ­¤æ—¶ `find ./.git/objects/ -type f`  æŸ¥çœ‹objectsç‰ˆæœ¬åº“ä¸­å¦‚ä¸‹

```bash
$ find ./.git/objects/ -type f
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/ea/e614245cc5faa121ed130b4eba7f9afbcc7cd9	#	new.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/c3/1fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba	#	test.txtæ–‡ä»¶çš„ç¬¬äºŒä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
./.git/objects/9d/74ec4055e0f1edc1921d749c250380ca7b5ebd	#	test.txtæ–‡ä»¶ç¬¬äºŒä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•åŠ new.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼• ä¸€èµ·çš„ä¸€ä¸ªå¿«ç…§  --- é¡¹ç›®çš„ç¬¬äºŒä¸ªå¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰ï¼š2ç‰‡å¶å­
```



å¢æ·»å¿«ç…§æ±‡æ€»

```bash
06e21bb0105e2de6c846725a9a7172f57dd1af96	#	test.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„å¿«ç…§--é¡¹ç›®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰
560a3d89bf36ea10794402f6664740c284d4ae3b	#	test.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
eae614245cc5faa121ed130b4eba7f9afbcc7cd9	#	new.txtæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
c31fb1e89d8b6b3ef34cdb5a2f999d6e29b822ba	#	test.txtæ–‡ä»¶çš„ç¬¬äºŒä¸ªç‰ˆæœ¬å¿«ç…§(gitå¯¹è±¡)
9d74ec4055e0f1edc1921d749c250380ca7b5ebd	#	test.txtæ–‡ä»¶ç¬¬äºŒä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼•åŠ new.txtæ–‡ä»¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨æš‚å­˜åŒºä¸­çš„ç´¢å¼• ä¸€èµ·çš„ä¸€ä¸ªå¿«ç…§  --- é¡¹ç›®çš„ç¬¬äºŒä¸ªå¿«ç…§ï¼ˆtreeå¯¹è±¡ï¼‰ï¼š2ç‰‡å¶å­
```





#### 2.3	æ ‘å¯¹è±¡æ€»ç»“

Gitå¯¹è±¡ ï¼š 	å“ˆå¸Œ 	å¯¹åº”   æ–‡ä»¶å†…å®¹										ä»£è¡¨æ–‡ä»¶çš„ä¸€æ¬¡æ¬¡ç‰ˆæœ¬

treeå¯¹è±¡ï¼š	å“ˆå¸Œ	å¯¹åº”	ä¸€ä¸ªæˆ–å¤šä¸ªGitå¯¹è±¡æˆ–æ ‘å¯¹è±¡		ä»£è¡¨é¡¹ç›®çš„ä¸€æ¬¡æ¬¡ç‰ˆæœ¬



**é—®é¢˜ï¼š**

1. ç°åœ¨æœ‰2ä¸ªæ ‘å¯¹è±¡ï¼ˆæ‰§è¡Œäº†ä¸¤æ¬¡write-treeï¼‰,åˆ†åˆ«ä»£è¡¨äº†æˆ‘ä»¬æƒ³è¦è·Ÿè¸ªçš„ä¸åŒé¡¹ç›®å¿«ç…§ï¼Œè‹¥æƒ³é‡ç”¨è¿™äº›å¿«ç…§ ï¼Œæˆ‘ä»¬å¿…é¡»è®°ä½è¿™ä¸¤ä¸ªSHA-1å€¼ã€‚ï¼ˆç°åœ¨æˆ‘ä»¬ æ˜¯æ‰‹åŠ¨è®°å½•çš„ï¼‰ï¼Œä¸‡ä¸€æœ‰è¶…çº§å¤šä¸ªç‰ˆæœ¬å¿«ç…§å‘¢ï¼Ÿé‚£ä¸å‚»é€¼äº†å•Š
2. æˆ‘ä»¬ä¹Ÿä¸çŸ¥é“æ˜¯è°ä¿å­˜çš„è¿™äº›å¿«ç…§ï¼Œæƒ³è¿½è¿°å¯¹åº”çš„ç ”å‘ï¼Œéƒ½æ— ä»ä¸‹æ‰‹
3. ä»€ä¹ˆæ—¶å€™ä¿å­˜çš„ä¹Ÿä¸çŸ¥é“
4. ğŸ”º <font color='red'>è§£å†³æ–¹æ¡ˆ:æäº¤å¯¹è±¡</font>







## ä¸‰ã€æäº¤å¯¹è±¡



#### 3.1	å‘½ä»¤

***

```
echo 'first commit' | git commit-tree æ ‘å¯¹è±¡ -p å‰ä¸€æ¬¡çš„commit-treeå¯¹è±¡
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨commit-tree å‘½ä»¤åˆ›å»ºä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œä¸ºæ­¤éœ€è¦æŒ‡å®šä¸€ä¸ªæ ‘å¯¹è±¡çš„SHA-1å€¼ï¼Œå·²ç»æ­¤æ¬¡æäº¤çš„çˆ¶æäº¤å¯¹è±¡ï¼ˆé¦–æ¬¡æäº¤ä¸éœ€è¦æŒ‡å®šçˆ¶æäº¤ï¼‰



**æ“ä½œï¼šç”¨ç¬¬ä¸€æ¬¡é¡¹ç›®ç‰ˆæœ¬çš„å¿«ç…§ï¼Œç”Ÿæˆç¬¬ä¸€ä¸ªæäº¤å¯¹è±¡**

> - â€‹	ä¸éœ€è¦æŒ‡å®šçˆ¶æäº¤å¯¹è±¡

```bash
zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit (master)
$ echo 'first commit' | git commit-tree 06e21bb0105e2de6c846725a9a7172f57dd1af96
94301216ef4ed9766a517a78bdeccd531dd8bc16

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit (master)
$ git cat-file -t 94301216ef4ed9766a517a78bdeccd531dd8bc16
commit

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit (master)
$ git cat-file -p 94301216ef4ed9766a517a78bdeccd531dd8bc16
tree 06e21bb0105e2de6c846725a9a7172f57dd1af96
author zmz <1054920870@qq.com> 1622294527 +0800
committer zmz <1054920870@qq.com> 1622294527 +0800

first commit
```



**æ“ä½œï¼šç”¨ç¬¬äºŒæ¬¡é¡¹ç›®ç‰ˆæœ¬å¿«ç…§ï¼Œç”Ÿæˆç¬¬äºŒä¸ªæäº¤å¯¹è±¡**

> - â€‹	éœ€è¦æŒ‡å®šçˆ¶æäº¤å¯¹è±¡

```bash
zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit (master)
$ echo 'second commit' | git commit-tree 9d74ec4055e0f1edc1921d749c250380ca7b5ebd -p 94301216ef4ed9766a517a78bdeccd531dd8bc16
e4059a27254c1bc0e76d666aa56fc512e638cab2

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit (master)
$ git cat-file -p e4059a27254c1bc0e76d666aa56fc512e638cab2
tree 9d74ec4055e0f1edc1921d749c250380ca7b5ebd
parent 94301216ef4ed9766a517a78bdeccd531dd8bc16
author zmz <1054920870@qq.com> 1622294769 +0800
committer zmz <1054920870@qq.com> 1622294769 +0800

second commit
```



**æ“ä½œï¼šgit status**

```bash
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

        new file:   new.txt			# ç»¿è‰²
        new file:   test.txt		# ç»¿è‰²
```





ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”º**æ€»ç»“ï¼š**ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”º

**git add .**  === **git hash-objec** + **git update-index**   å…ˆåˆ°ç‰ˆæœ¬åº“ï¼Œå†åˆ°æš‚å­˜åŒº

**git commit** === **git write-tree**  +  **git commit-tree**  + 'å…¶ä»–'

**æš‚å­˜åŒºä¸€ç›´ä¸ä¼šæ¸…ç©ºï¼Œå“ªæ€•æ˜¯æˆ‘ä»¬å…³äº†gitï¼Œé‡æ–°æ‰“å¼€ï¼Œè¿˜æ˜¯æ‹‰å–åˆ«äººçš„ä»£ç ã€‚å› ä¸ºæš‚å­˜åŒºè¡¨ç¤ºçš„å°±æ˜¯ä¸€ä¸ªé¡¹ç›®ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä¸€ä¸ªé¡¹ç›®ç‰ˆæœ¬æˆ‘ä»¬å°±å¯ä»¥write-treeä¿å­˜åˆ°objectç‰ˆæœ¬åº“ä¸­ï¼Œä½†æ˜¯å®ƒä¼šæ ¡éªŒwrite-treeç”Ÿæˆçš„è¿™ä¸ªtreeå¯¹è±¡çš„å“ˆå¸Œï¼Œå¦‚æœå“ˆå¸Œè·Ÿå½“å‰ç‰ˆæœ¬æŒ‡é’ˆæ‰€æŒ‡çš„ä¸€è‡´ï¼Œå®ƒå°±ä¸¢å¼ƒæ‰ä¸æ‰§è¡Œï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œå°±ç”Ÿæˆä¸€ä¸ªæ–°çš„treeå¯¹è±¡**

- **git commit-tree ** ä¹‹å git status è¿˜æ˜¯ç»¿è‰²çš„ï¼Œè¿™ä¸ªä¸çŸ¥é“æ€ä¹ˆç ´

**æœ¯è¯­ï¼šé¡¹ç›®çš„ç‰ˆæœ¬å°±æ˜¯ä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œæœ¬è´¨ä¸Šé¡¹ç›®çš„å¿«ç…§åº”è¯¥æ˜¯ä¸€ä¸ªæ ‘å¯¹è±¡**

```bash
zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2
$ git init
Initialized empty Git repository in D:/MyGit-2/.git/

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ echo 'test.txt v1' > test.txt

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git status
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        test.txt	#çº¢è‰²

nothing added to commit but untracked files present (use "git add" to track)

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git add .
warning: LF will be replaced by CRLF in test.txt.
The file will have its original line endings in your working directory

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

        new file:   test.txt	#ç»¿è‰²

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ find ./.git/objects/ -type f
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git ls-files -s
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0       test.txt

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git commit -m 'first comiit'
[master (root-commit) c272bff] first comiit
 1 file changed, 1 insertion(+)
 create mode 100644 test.txt

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git status
On branch master
nothing to commit, working tree clean

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ find ./.git/objects/ -type f
./.git/objects/06/e21bb0105e2de6c846725a9a7172f57dd1af96
./.git/objects/56/0a3d89bf36ea10794402f6664740c284d4ae3b
./.git/objects/c2/72bffdffb8feec571124ae5fa43046ccb1d881

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit-2 (master)
$ git ls-files -s
100644 560a3d89bf36ea10794402f6664740c284d4ae3b 0       test.txt
```







## å››ã€å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“å…·ä½“ä½ç½®

#### Gitç›®å½•

![](gitç›®å½•.png)

> - â€‹	refs è¿™ä¸ªç›®å½•å­˜å‚¨ï¼ŒæŒ‡å‘æ•°æ®çš„ æäº¤å¯¹è±¡çš„æŒ‡é’ˆï¼Œå°±æ˜¯åˆ†æ”¯



**å·¥ä½œåŒº**

![](å·¥ä½œåŒº.png)





**æš‚å­˜åŒºï¼šæ˜¯ä¸€ä¸ªindexæ–‡ä»¶ï¼Œæ­£å¯¹åº”äº†æš‚å­˜åŒºå­˜æ”¾çš„æ˜¯ç´¢å¼•**

![](æš‚å­˜åŒº.png)

**ç‰ˆæœ¬åº“ï¼šå­˜æ”¾å†…å®¹**

![](ç‰ˆæœ¬åº“.png)



**ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºè¶…çº§é‡ç‚¹ï¼šé¡¹ç›®çš„ç‰ˆæœ¬å°±æ˜¯ä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œæœ¬è´¨ä¸Šé¡¹ç›®çš„å¿«ç…§åº”è¯¥æ˜¯ä¸€ä¸ªæ ‘å¯¹è±¡ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”º**

**æ¦‚è®ºæ¥äº†ï¼š**

> - â€‹	ä¸€ä¸ªå®Œæ•´çš„æµç¨‹ï¼Œæœ€å°‘è¦åŒ…å«ä¸€ä¸ªgitå¯¹è±¡ï¼Œä¸€ä¸ªæ ‘å¯¹è±¡ï¼Œä¸€ä¸ªæäº¤å¯¹è±¡
> -    ä¸€ä¸ªæäº¤ï¼Œå¿…å®šåªæœ‰ä¸€ä¸ªæäº¤å¯¹è±¡ï¼Œä¸€ä¸ªæ ‘å¯¹è±¡ï¼Œgitå¯¹è±¡å¯ä»¥ç”¨å¾ˆå¤š
> -    git add . æµç¨‹æ˜¯ç”Ÿæˆå¯¹åº”çš„gitå¯¹è±¡å­˜æ”¾åœ¨ç‰ˆæœ¬åº“ä¸­ï¼Œç„¶åå°†è¿™äº›gitå¯¹è±¡å“ˆå¸Œå€¼å’Œåˆ«åæ”¾å…¥æš‚å­˜åŒºä¸­



**git add .** 

â€‹		**git hash-objec** + **git update-index**   å…ˆåˆ°ç‰ˆæœ¬åº“ï¼Œå†åˆ°æš‚å­˜åŒº

**git commit -m '   '** 

â€‹		**git write-tree**  +  **git commit-tree** 





## äº”ã€é«˜å±‚å‘½ä»¤



#### 5.1 å·¥ä½œåŒº

***

**å·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¸å¤–ä¹ä¸¤ç§çŠ¶æ€ï¼šå·²<font color='red'>ç»è·Ÿè¸ª</font>	æˆ–	<font color='red'>æœªè·Ÿè¸ª</font>>**

- **å·²è·Ÿè¸ªçš„æ–‡ä»¶**
	- **æŒ‡æœ¬æ¥å°±è¢«çº³å…¥ç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ï¼Œåœ¨ä¸Šæ¬¡å¿«ç…§ä¸­æœ‰ä»–ä»¬çš„è®°å½•ï¼Œå·¥ä½œä¸€æ®µæ—¶é—´åï¼Œå·²è·Ÿè¸ªçš„æ–‡ä»¶ä»–ä»¬çš„è¿˜æœ‰3ç§çŠ¶æ€åˆ†åˆ«æ˜¯<font color='red'>å·²ä¿®æ”¹</font>ã€<font color='red'>å·²æš‚å­˜</font>æˆ–è€…<font color='red'>å·²æäº¤</font>**       
- **æœªè·Ÿè¸ªçš„æ–‡ä»¶**
	- **é™¤å¼€å·²è·Ÿè¸ªçš„éƒ½æ˜¯æœªè·Ÿè¸ªçš„æ–‡ä»¶ã€‚ä»–ä»¬æ—¢æ²¡æœ‰ä¸Šæ¬¡æ›´æ–°çš„å¿«ç…§ï¼Œä¹Ÿä¸åœ¨å½“å‰æš‚å­˜åŒºåŸŸ**

**åˆæ¬¡å…‹éš†æŸä¸ªä»“åº“æ—¶ï¼Œå·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½å±äºå·²è·Ÿè¸ªæ–‡ä»¶ï¼Œä¸”çŠ¶æ€ä¸º<font color='red'>å·²æäº¤</font>ï¼›åœ¨ç¼–è¾‘è¿‡æŸäº›æ–‡ä»¶ä¹‹åï¼ŒGitå°†è¿™äº›æ–‡ä»¶æ ‡ä¸º<font color='red'>å·²ä¿®æ”¹</font>ã€‚æˆ‘ä»¬é€æ­¥æŠŠè¿™äº›ä¿®æ”¹è¿‡çš„æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒºåŸŸï¼Œç›´åˆ°æœ€åä¸€æ¬¡æ€§æäº¤æ‰€æœ‰è¿™äº›æš‚å­˜èµ·æ¥çš„æ–‡ä»¶ã€‚**







#### 5.2	æš‚å­˜åŒº

***

**å½“å‡ºç°å¦‚ä¸‹æƒ…å†µæ—¶ï¼šGit add . ä¹‹ååˆä¿®æ”¹äº†æ–‡ä»¶**

```bash
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

        new file:   test.txt	# ç»¿è‰²

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   test.txt	# çº¢è‰²
```

**å‡ºç°ä¸Šé¢è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸å°±æ˜¯å†git add . ç”±äº test.txtåå­—ï¼Œä¸å˜ï¼Œæ‰€ä»¥ä¼šè¦†ç›–æ‰æš‚å­˜åŒºçš„ç´¢å¼•ã€‚ä½†æ˜¯ç‰ˆæœ¬åº“ä¸­ä¸ä¼šè¦†ç›–ï¼Œä¼šä¿ç•™è¦†ç›–å‰çš„gitå¯¹è±¡**

**å¤‡æ³¨ï¼šå·¥ä½œåŒºæ–‡ä»¶çš„çŠ¶æ€ï¼Œæ˜¯æ ¹æ®æš‚å­˜åŒºçš„ç´¢å¼•åˆ°çš„æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒçš„å‡ºæ¥çš„ã€‚ã€‚**







#### 5.3	æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„æ›´æ–°

***

â€‹		**å®é™…ä¸Š`git status`çš„æ˜¾ç¤ºæ¯”è¾ƒç®€å•ï¼Œä»…ä»…æ˜¯åˆ—å‡ºäº†ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå¦‚æœè¦æŸ¥çœ‹å…·ä½“ä¿®æ”¹äº†ä»€ä¹ˆåœ°æ–¹ï¼Œå¯ä»¥ç”¨`git diff` å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤å®ƒå·²ç»èƒ½è§£å†³æˆ‘ä»¬ä¸¤ä¸ªé—®é¢˜äº†ï¼š **

- **å½“å‰åšçš„å“ªäº›æ›´æ–°è¿˜æ²¡æœ‰æš‚å­˜**
	- **å‘½ä»¤:`git diff(ä¸åŠ å‚æ•°ç›´æ¥è¾“å…¥git diff)`**

- **æœ‰å“ªäº›æ›´æ–°å·²ç»æš‚å­˜èµ·æ¥å‡†å¤‡å¥½äº†ä¸‹ä¸€æ¬¡æäº¤äº†**
	- **å‘½ä»¤:`git diff --cached`æˆ–è€…  `git diff --staged(1.6.1ä»¥ä¸Š)`**





#### 5.4	`git commit å†™è¶…é•¿æ³¨é‡Š`

**å‘½ä»¤:`git commit` å›è½¦ï¼šæ‰“å¼€å¦‚ä¸‹vimç•Œé¢**

```bash

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# On branch master
# Changes to be committed:
#       modified:   test.txt
#

```

**å¤‡æ³¨ï¼šæˆ‘ä»¬å°±å¯ä»¥åœ¨é‡Œé¢å†™è¶…çº§é•¿çš„æ³¨é‡Šï¼Œå†™åˆ°#å·åé¢ ï¼Œå°†ä¼šæ— æ•ˆ**





#### 5.5	åˆ é™¤ä¸€ä¸ªæ–‡ä»¶

> - â€‹	**åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å,`git add . `ä¸ä¼šåœ¨objectç‰ˆæœ¬ç®¡ç†åº“ä¸­ç”Ÿæˆæ–°çš„gitå¯¹è±¡**
> - â€‹    **`git commit -m`ä¹‹å,ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æ ‘å¯¹è±¡å’Œä¸€ä¸ªæäº¤å¯¹è±¡**
> 	- **æƒ³æƒ³ä¹Ÿæ˜¯å•Š,æš‚å­˜åŒºå­˜æ”¾çš„æ˜¯ä¸Šä¸€æ¬¡çš„é¡¹ç›®ç‰ˆæœ¬,ç„¶åä»é‡Œé¢åˆ é™¤äº†ä¸€ä¸ªç´¢å¼•,å“ˆå¸Œå€¼å˜äº†,git write-treeçš„æ—¶å€™å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æ ‘å¯¹è±¡,ç”¨è¿™ä¸ªæ–°çš„æ ‘å¯¹è±¡å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°çš„commitæäº¤å¯¹è±¡**





#### 5.6	é‡å‘½åä¸€ä¸ªæ–‡ä»¶

> - â€‹	**é¦–é€‰é‡åï¼Œgitä¸­è®¤ä¸ºæ˜¯ä¸¤ä¸ªåŠ¨ä½œï¼Œå…ˆåˆ é™¤ï¼Œå†æ–°å»º**

```bash
$ git status
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        deleted:    test.txt

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        test-new.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

> - â€‹	**`git add . `ä¸€ä¸‹çœ‹çœ‹å‘¢ï¼Œå…¶å®è¿˜æŒºæ™ºèƒ½ï¼Œå“ˆå“ˆï¼Œæç¤ºrename**

```bash
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        renamed:    test.txt -> test-new.txt
```



#### 5.7	Gitå‘½ä»¤å–åˆ«å

***

```bash
git config --global alias.lol "log --oneline --graph --decorate --all"	# graphå¿…é¡»åœ¨--decorate å‰é¢ä¸ç„¶è¦b
```







## å…­ã€Gitåˆ†æ”¯æ“ä½œï¼ˆæ€æ‰‹åŠŸèƒ½ï¼‰



#### 6.1	åˆ†æ”¯æ¦‚å¿µ

***

åˆ†æ”¯å°±æ˜¯ä¸€ä¸ªæ´»åŠ¨çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå°±åœ¨æäº¤å¯¹è±¡å‰é¢ï¼ŒHEADæŒ‡å‘æäº¤å¯¹è±¡ï¼Œä»–å°±æ˜¯ä¸ªæŒ‡é’ˆï¼Œæ´»åŠ¨çš„æŒ‡é’ˆï¼Œä»–ä¸æ˜¯ä¸ªæ­»çš„ï¼Œå½“ä½ æäº¤å¯¹è±¡ä¸€ç›´å†å¾€å‰æ›´æ–°ï¼Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿä¸€ç›´è·Ÿä½ å¾€ä¸€ç›´å¾€å‰èµ°ï¼Œä½ æäº¤å¯¹è±¡æœ€æ–°åœ¨å“ªï¼Œå®ƒå°±è·‘åˆ°åˆ°å“ªé‡Œ



masteråˆ†æ”¯ï¼Œå®ƒæ˜¯é»˜è®¤å°±æœ‰çš„åˆ†æ”¯ï¼Œå«ä¸»åˆ†æ”¯ã€‚å½“æˆ‘ä»¬æ¯ä¸€æ¬¡æäº¤ä»£ç çš„æ—¶å€™ï¼ŒHEADæŒ‡å‘æœ€æ–°ä¸€æ¬¡çš„æäº¤å¯¹è±¡ã€‚



æˆ‘ä»¬æ¥çœ‹ä¸€çœ¼ï¼š

gitç›®å½•ä¸­æœ‰ä¸€ä¸ªHEADæ–‡ä»¶

å½“æˆ‘ä»¬åœ¨masteråˆ†æ”¯ä¸‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬çœ‹çœ‹HEADä¸­å†…å®¹å¦‚ä¸‹

```bash 
$ cat HEAD
ref: refs/heads/master
```

HEAD æŒ‡å‘masteråˆ†æ”¯



refs é‡Œé¢æœ‰ä¸¤ä¸ªç›®å½•ï¼Œä¸€ä¸ªheadsä¸€ä¸ªtagsï¼Œheadsé‡Œé¢æœ‰åˆ†æ”¯æ–‡ä»¶ã€‚æ¯ä¸€ä¸ªåˆ†æ”¯æ–‡ä»¶ä¸­éƒ½å­˜æ”¾äº†æ¯ä¸€æ¡åˆ†æ”¯ä¸Šæœ€æ–°ä¸€æ¬¡çš„æäº¤å¯¹è±¡

> - â€‹	heads
> 	- masteræ–‡ä»¶ï¼Œ ç›®å‰é‡Œé¢çš„å†…å®¹æ˜¯     `347bafa54863f0cf42925726ca37774ea4a71fe2`    ,æœ€åä¸€æ¬¡çš„æäº¤å¯¹è±¡
> - â€‹    tags



åˆ†æ”¯æ˜¯ä»€ä¹ˆï¼Œæ˜¯æŒ‡å‘æœ€æ–°æäº¤å¯¹è±¡çš„ä¸€ä¸ªæŒ‡é’ˆ



#### 6.2	åˆ›å»ºåˆ†æ”¯

***

**å‘½ä»¤ï¼š`git branch åˆ†æ”¯å`**

**ä½œç”¨ï¼š**

> - â€‹	**ä¸ºä½ åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯æ–‡ä»¶ï¼ˆå­˜æ”¾åœ¨HEAD/headsä¸‹ï¼Œæ–‡ä»¶åå°±æ˜¯åˆ†æ”¯åï¼Œåˆ›å»ºæ–°åˆ†æ”¯çš„æ—¶å€™ï¼Œæ–‡ä»¶ä¸­å­˜æ”¾çš„æ˜¯å½“å‰æŒ‡é’ˆæ‰€æŒ‡çš„æäº¤å¯¹è±¡ï¼‰ã€‚æ¯”å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªtestingåˆ†æ”¯ï¼š`git branch testing`.è¿™ä¼šåœ¨å½“å‰æ‰€åœ¨çš„æäº¤å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆ**
> - â€‹    **ğŸ”ºæ­¤æ—¶refsä¸‹çš„headsç›®å½•ä¸­ä¼šç”Ÿæˆä¸€ä¸ªtestingï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å­˜æ”¾äº†å½“å‰æäº¤å¯¹è±¡çš„å“ˆå¸Œå€¼**

ğŸ”º**æ³¨æ„ï¼š**

> - â€‹	**`git branch åˆ†æ”¯å` åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸­å»**
> - â€‹    **æ­¤æ—¶.gitç›®å½•ä¸‹é¢çš„HEADæ–‡ä»¶ä¸­å­˜æ”¾çš„è¿˜æ˜¯     `ref: refs/heads/master                                                          `  è¿™æ®µæ•°æ®ï¼Œå½“æˆ‘ä»¬åˆ‡æ¢åˆ°testingåˆ†æ”¯çš„æ—¶å€™ï¼Œå†…å®¹å˜æˆ     `ref: refs/heads/testing                                                          `    **
> - â€‹    **å½“æˆ‘ä»¬åœ¨masteråˆ†æ”¯ä¸Šå†æ¬¡æäº¤ï¼ŒmasteræŒ‡é’ˆä¼šæŒ‡å‘æœ€æ–°ä¸€æ¬¡çš„æäº¤å¯¹è±¡ï¼ˆheadsç›®å½•ä¸‹masteræ–‡ä»¶ä¸­ï¼Œå­˜æ”¾æœ€æ–°çš„æäº¤å¯¹è±¡ï¼‰ï¼Œè€ŒtestingæŒ‡é’ˆä¸å˜**

![](åˆ›å»ºåˆ†æ”¯.png)

 

#### 6.3	åˆ‡æ¢åˆ†æ”¯

***

**å‘½ä»¤ï¼š`git checkout testing`**

**å¤‡æ³¨ï¼šåˆ‡æ¢åˆ†æ”¯å®é™…å°±æ˜¯å°†gitç›®å½•ä¸‹çš„HEADæŒ‡é’ˆæ–‡ä»¶ä¸­çš„å†…å®¹ä¿®æ”¹æŒ‡å‘refsç›®å½•ä¸‹/headsä¸­çš„testingåˆ†æ”¯æ–‡ä»¶**







#### 6.4	**æ˜¾ç¤ºåˆ†æ”¯åˆ—è¡¨**

***

**å‘½ä»¤ï¼š`git branch`**





#### 6.5	åˆ é™¤åˆ†æ”¯

***

**å‘½ä»¤:`git branch -d åˆ†æ”¯å`**

> - â€‹	**ğŸ”ºä¸èƒ½å†å½“å‰åˆ†æ”¯ï¼Œåˆ é™¤å½“å‰åˆ†æ”¯**

```bash
$ git branch -d damu
error: The branch 'damu' is not fully merged.
If you are sure you want to delete it, run 'git branch -D damu'.
```

**å¤‡æ³¨æŠ¥é”™ï¼šè¯´damuåˆ†æ”¯å®Œå…¨æ²¡æœ‰è¢«åˆå¹¶ï¼Œå¦‚æœä½ ç¡®å®šæƒ³åˆ é™¤å®ƒï¼Œè¯·ä½¿ç”¨`git branch -D damu`**

**å‘½ä»¤ï¼š`git branch -D åˆ†æ”¯å`å¼ºåˆ¶åˆ é™¤**



#### 6.6	æŸ¥çœ‹å®Œæ•´çš„åˆ†æ”¯logï¼ˆå®Œæ•´åˆ†æ”¯å›¾ï¼‰ --- èµ·åˆ«åå‘½ä»¤

****

**å‘½ä»¤:`git log --oneline --decorate --graph --all `**

**ğŸ”ºå‘½ä»¤:`git config --global alias.åˆ«å git log --oneline --decorate --graph --all `**



#### 6.7	æŸ¥çœ‹æ¯ä¸€ä¸ªåˆ†æ”¯æœ€åä¸€æ¬¡æäº¤

**å‘½ä»¤ï¼š`git branch -v`**

```bash
$ git branch -v
* damu   a3df16a damu.txt v2ç‰ˆæœ¬
  master b148797 åˆ é™¤test.txt , æ–°å»ºdamu.txt
```



#### 6.8 	æ–°å»ºä¸€ä¸ªåˆ†æ”¯å¹¶ä½¿åˆ†æ”¯æŒ‡å‘å¯¹åº”çš„æäº¤å¯¹è±¡

**å‘½ä»¤:`git branch åˆ†æ”¯å commitHash`**

**ä½œç”¨ï¼šå›åˆ°è¿‡å»ï¼Œå»çœ‹ä¸€ä¸‹ä»¥å‰çš„ä»£ç ï¼Œçœ‹å®Œå°†æœ‰ç”¨çš„ä»£ç å’Œæ–‡ä»¶æ‹·è´å‡ºæ¥ï¼Œç„¶ååˆ‡åˆ°masteråˆ†æ”¯ï¼Œåˆ é™¤è¯¥åˆ†æ”¯ã€‚ã€‚ã€‚ã€‚ã€‚æ­¤æ–¹æ³•å«å›åˆ°è¿‡å»**





## ä¸ƒã€åˆ‡æ¢åˆ†æ”¯ç»†èŠ‚è®²è§£



#### 7.1	åˆ‡æ¢åˆ†æ”¯çš„ç»†èŠ‚

##### **å‘½ä»¤ï¼š`git checkout -b åˆ†æ”¯å`**

****

**å¤‡æ³¨ï¼šä»å½“å‰ä½ç½®åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶ååˆ‡åˆ°æ–°å»ºçš„åˆ†æ”¯ä¸­å»**



#### **7.2	åˆ‡æ¢åˆ†æ”¯æ”¹å˜ä¸‰ä¸ªåœ°æ–¹:**

> - â€‹	**HEADæŒ‡é’ˆæŒ‡å‘**
> - â€‹    **æš‚å­˜åŒº**
> - â€‹    **å·¥ä½œç›®å½•**



#### **7.3	åˆ‡æ¢åˆ†æ”¯çš„æœ€ä½³å®è·µ**

> - â€‹	**æ¯æ¬¡åˆ‡æ¢åˆ†æ”¯å‰ï¼Œå½“å‰åˆ†æ”¯ä¸€å®šå¾—æ˜¯å¹²å‡€çš„ï¼ˆå·²æäº¤çŠ¶æ€ï¼‰**



#### ğŸ”º7.4	Gitåˆ‡æ¢åˆ†æ”¯å¤±è´¥

**å‰ç½®æ¡ä»¶:ç°æœ‰ä¸¤ä¸ªåˆ†æ”¯,masterå’Œtest, teståˆ†æ”¯æœ€æ–°ä¸€æ¬¡æäº¤ä¸­æœ‰c.txtè¿™ä¸ªæ–‡ä»¶**

**åœºæ™¯:æˆ‘ä»¬åˆ‡æ¢åˆ†æ”¯åˆ°teståˆ†æ”¯,ä¿®æ”¹c.txtæ–‡ä»¶ä¸­çš„å†…å®¹,ä¸addä¸commit,ç„¶ååˆ‡æ¢åˆ†æ”¯**

**ç»“æœ:åˆ‡æ¢å¤±è´¥,å¿…é¡»æäº¤ä»¥åæ‰èƒ½åˆ‡æ¢.**

**å¦‚ä½•æ‰ä¼šåˆ‡æ¢åˆ†æ”¯å¤±è´¥å‘¢ï¼Ÿï¼šæœ‰æ—¶å€™æ˜¯æˆåŠŸæœ‰æ—¶å€™å¤±è´¥ï¼Ÿ**

```bash
$ git checkout master
error: Your local changes to the following files would be overwritten by checkout:
        c.txt
Please commit your changes or stash them before you switch branches.	#è¯·æäº¤æ›´æ”¹æˆ–å­˜å‚¨æ›´æ”¹ï¼Œç„¶åå†åˆ‡æ¢åˆ†æ”¯
Aborting
```

**å¦‚ä½•æ‰ä¼šåˆ‡æ¢åˆ†æ”¯å¤±è´¥å‘¢ï¼Ÿï¼šæœ‰æ—¶å€™æ˜¯æˆåŠŸæœ‰æ—¶å€™å¤±è´¥ï¼Ÿ**

å½“æˆ‘ä»¬çš„ä¸¤æ¡åˆ†æ”¯åœ¨ä¸€æ¡çº¿ä¸Šçš„æ—¶æ—¶ï¼Œæˆ‘ä»¬åœ¨masterå’Œxxåˆ†æ”¯ä¸Šé¢è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ—¶æ˜¯å¯ä»¥åˆ‡æ¢åˆ†æ”¯ï¼Œä¸”ä¼šæŠŠä¿®æ”¹çš„å†…å®¹å¸¦åˆ°å¦å¤–ä¸€æ¡åˆ†æ”¯ä¸Šé¢ã€‚

![image-20210915211509890](image-20210915211509890.png)



å½“æˆ‘ä»¬ä¸¤æ¡åˆ†æ”¯ä¸åœ¨ä¸€æ¡çº¿ä¸Šçš„æ—¶å€™ï¼Œè¿™æ—¶å€™









#### **ğŸ”º7.5	å‘(åˆå§‹åŒ–ä¸€ä¸ªæ–‡ä»¶å,ä¸addä¸commit,ä¹ŸTMèƒ½åˆ‡æ¢åˆ†æ”¯æˆåŠŸ,ä¸å—Gitåˆ‡æ¢åˆ†æ”¯å¤±è´¥çš„çº¦æŸ)**

**å‰ç½®æ¡ä»¶:ç°æœ‰ä¸¤ä¸ªåˆ†æ”¯,master å’Œ test**

- ğŸ”ºğŸ”ºğŸ”ºåˆå§‹æ–‡ä»¶(è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡åœ¨å·¥ä½œåŒºä¸­å‡ºç°ï¼Œæˆ–è€…æš‚å­˜åŒº - å› ä¸ºgit checkout åˆ‡æ¢åˆ†æ”¯ç›¸å½“äºgit reset --hard CommitHashçš„æ•ˆæœï¼Œ ) -- ä¸‹é¢çš„å‘å°±å‡ºåœ¨åˆå§‹æ–‡ä»¶çš„æ—¶å€™ğŸ”ºğŸ”ºğŸ”º

**åˆå§‹åŒ–æ–‡ä»¶çš„ä¸¤ä¸ªå‘åœºæ™¯:**

> - â€‹	**ç¬¬ä¸€ç§æƒ…å†µ:æˆ‘ä»¬åœ¨teståˆ†æ”¯ä¸Š<font color='red'>åˆ›å»º</font>ä¸€ä¸ªæ–‡ä»¶demo,ä¸addä¸commit,ç„¶ååˆ‡å›åˆ°masteråˆ†æ”¯.è¿™ä¸ªæ—¶å€™gitå‡ºäºæ•°æ®å®‰å…¨çš„è€ƒè™‘å®ƒä¼šå°†è¿™ä¸ªdemoæ–‡ä»¶å¸¦åˆ°masteråˆ†æ”¯ä¸Š,è¿˜ä¼šæŠŠè¿™ä¸ªdemoæ–‡ä»¶çš„çŠ¶æ€ä¹Ÿä¸€èµ·å¸¦è¿‡æ¥.demoåœ¨teståˆ†æ”¯ä¸Šå¤„äºæœªè·Ÿè¸ªçŠ¶æ€,åˆ‡æ¢åˆ°masteråˆ†æ”¯ä»¥å,demoæ–‡ä»¶ä¹Ÿå¤„äºæœªè·Ÿè¸ªçŠ¶æ€.è™½ç„¶ä»–æ˜¯å¥½å¿ƒ,ä½†æ˜¯è¿™æ ·å¤ªä¹±äº†.å®¹æ˜“æ±¡æŸ“masteråˆ†æ”¯(å¦‚æœä½ ä¸å°å¿ƒåˆç»™æäº¤åˆ°masteråˆ†æ”¯é‡Œé¢å»äº†.ä¸Šçº¿ä»¥åçˆ†ç‚¸äº†,é‚£å°±æŸå¤±æƒ¨é‡äº†)**
> - â€‹    **ç¬¬äºŒç§æƒ…å†µ:æˆ‘ä»¬åœ¨teståˆ†æ”¯ä¸Š<font color='red'>åˆ›å»º</font>ä¸€ä¸ªæ–‡ä»¶demo,æˆ‘ä»¬addä¸€ä¸‹,ä¸commit,ç„¶ååˆ‡æ¢åˆ°masteråˆ†æ”¯.è¿™ä¸ªæ—¶å€™gitå‡ºäºæ•°æ®å®‰å…¨çš„è€ƒè™‘ä»–ä¼šå°†è¿™ä¸ªdemoæ–‡ä»¶ä»£åˆ°masteråˆ†æ”¯ä¸Š,è¿˜ä¼šæŠŠè¿™ä¸ªdemoæ–‡ä»¶çš„çŠ¶æ€ä¹Ÿä¸€èµ·å¸¦è¿‡æ¥.demoåœ¨teståˆ†æ”¯ä¸Šå¤„äºå·²æš‚å­˜,å¾…æäº¤çŠ¶æ€.åˆ‡æ¢åˆ°masteråˆ†æ”¯ä»¥å,demoæ–‡ä»¶ä¹Ÿå¤„äºå·²æš‚å­˜,å¾…æäº¤çŠ¶æ€.è™½ç„¶ä»–æ˜¯å¥½å¿ƒ,ä½†æ˜¯ä¼šæ±¡æŸ“masteråˆ†æ”¯**

**ç»“æœ:éƒ½èƒ½åˆ‡æ¢æˆåŠŸ,è€Œä¸”å¾ˆå®¹æ˜“æ±¡æŸ“åˆ†æ”¯,è¿™å‘éå¸¸éå¸¸éå¸¸éå¸¸ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºä¸¥é‡çš„,è®°ä½æœ€ä½³å®è·µ,è®°ä½æœ€ä½³å®è·µ**



## å…«ã€åˆå¹¶åˆ†æ”¯

**æ¡ˆä¾‹:å¦‚ä¸‹,ä»¥æ­¤æ¡ˆä¾‹å¼•å…¥mergeåˆå¹¶åˆ†æ”¯åŠŸèƒ½**

![](åˆ‡æ¢åˆ†æ”¯å®é™…æ¡ˆä¾‹ .png)



**å‰ç½®æ¡ä»¶:ç›®å‰å¼€å‘åˆ†æ”¯iss53 å·²ç»å®Œæˆäº†50%, çº¿ä¸ŠBUGåˆ†æ”¯hotbugå·²ç»ä¿®å¤å®Œæˆ.æµç¨‹å›¾å¦‚ä¸‹;**

![](åˆ†æ”¯æµç¨‹.png)



**ç°åœ¨æˆ‘ä»¬è¦å°†hotfixåˆ†æ”¯åˆåˆ°masteråˆ†æ”¯ä¸Š;å¼•å…¥8.1 åˆå¹¶åˆ†æ”¯**



#### 8.1	å¿«è¿›åˆ†æ”¯åˆå¹¶(æ— å†²çª)

**å‘½ä»¤:`git merge åˆ†æ”¯å`**

> - â€‹	**å¦‚æœæˆ‘ä»¬è¦å°†ä¸Šå›¾åˆ†æ”¯å›¾ä¸­çš„hotfixåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯ä¸Š,æˆ‘ä»¬å¿…é¡»åˆ‡æ¢åˆ°masteråˆ†æ”¯,ç„¶åæ‰§è¡Œ`git merge hotfix`**
> -    **æ­¤æ—¶æ˜¯å¿«è¿›åˆå¹¶,ä»€ä¹ˆæ˜¯å¿«è¿›åˆå¹¶,çœ‹ä¸‹å›¾**

![](å¿«è¿›åˆå¹¶.png)

> - â€‹	**ğŸ”ºğŸ”ºğŸ”ºå¿«è¿›åˆå¹¶æ˜¯æ²¡æœ‰å†²çªçš„**
> 	- **ğŸ”ºğŸ”ºğŸ”ºä¸ºä»€ä¹ˆæ²¡æœ‰å†²çªå‘¢?å› ä¸ºhotfixæ˜¯ä»masterä¸Šæ‹‰å–ä¸‹æ¥çš„,hotfixæ­¤æ—¶çš„ä¿®æ”¹ç›¸å½“äºåœ¨masterä¸Šä¿®æ”¹(å› ä¸ºmasterå¯ä»¥é€šè¿‡çº¿è·¯ç›´æ¥èµ°åˆ°hotfix)**

```bash
$ git merge hotbug
Updating b2b775d..2d75b08
Fast-forward	# å¿«è¿›åˆå¹¶
 a.txt | 1 +
 1 file changed, 1 insertion(+)
```

```bash
$ git lol
* 2d75b08 (HEAD -> master, hotbug) 7 commit for a.txt v3 to fix hotbug
| * 1e2f5ef (iss53) 6 commit for iss53 50%
|/
* b2b775d 2 commit for a.txt
* bb51795 1 comimit for a.txt v1
```

**å¿«è¿›åˆå¹¶åå¾—åˆ°å¦‚ä¸‹åˆ†æ”¯å›¾:**

![](åˆ†æ”¯çŠ¶æ€-2.png)









**æ¡ˆä¾‹é—®é¢˜:æ­¤æ—¶çš„iss53åˆ†æ”¯å·²ç»è¿‡æœŸ(ç›¸å¯¹äºç°åœ¨çš„masteråˆ†æ”¯æ¥è¯´)**





#### 8.2 å…¸å‹åˆå¹¶(æœ‰å†²çª)

![](åˆ†æ”¯çŠ¶æ€-2.png)

**åœºæ™¯:æ­¤æ—¶æˆ‘ä»¬åœ¨iss53åˆ†æ”¯ä¸Š,å†æ¬¡ä¿®æ”¹å†æ¬¡æäº¤,å†æ¬¡ä¿®æ”¹å†æ¬¡æäº¤,ç„¶åæŠŠiss53åˆå¹¶åˆ°masteråˆ†æ”¯ä¸Š**

**å‘½ä»¤:**

> - â€‹	**`git checkout master`**
> - â€‹    **`git merge iss53` ç­‰åˆ°å¦‚ä¸‹åœºæ™¯**

```bash
zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit3 (master)
$ git merge iss53
Auto-merging a.txt	#è‡ªåŠ¨åˆå¹¶a.txt
CONFLICT (content): Merge conflict in a.txt #CONFLICTï¼ˆå†…å®¹ï¼‰ï¼šåˆå¹¶ a.txt ä¸­çš„å†²çª(è¿™é‡Œå°±æ˜¯å†²çªçš„æ–‡ä»¶)
Automatic merge failed; fix conflicts and then commit the result. #è‡ªåŠ¨åˆå¹¶å¤±è´¥ï¼› ä¿®å¤å†²çªï¼Œç„¶åæäº¤ç»“æœ

zmz@DESKTOP-IVHSPRM MINGW64 /d/MyGit3 (master|MERGING)	# è¿™é‡Œ
$
```

**æˆ‘ä»¬`git status çœ‹ä¸€çœ¼`**

```bash
$ git status
On branch master
You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Changes to be committed:

        new file:   iss53.txt	# è¿™ä¸ªæ˜¯æ–°å¢çš„(ç›¸å¯¹äºmasteræ¥è¯´)

Unmerged paths:
  (use "git add <file>..." to mark resolution)

        both modified:   a.txt	# è¿™ä¸ªæ˜¯ä¿®æ”¹çš„(ç›¸å¯¹äºmasteræ¥è¯´),è¿™å°±æ˜¯å†²çªçš„æ–‡ä»¶
```

**æ­¤æ—¶æˆ‘ä»¬æ‰“å¼€a.txt è¿™ä¸ªæ–‡ä»¶çœ‹ä¸€çœ¼**

**`vim a.txt`**

```bash
a.txt v1
a.txt v2
<<<<<<< HEAD
a.txt v3
=======
a.txt v3 for iss53
>>>>>>> iss53
```



**æˆ‘ä»¬ä¿ç•™hotfixçš„ä¿®æ”¹å’Œæˆ‘æœ¬æ¬¡çš„ä¿®æ”¹,ä¿®æ”¹åå¦‚ä¸‹**

**`vim a.txt`**

```bash
a.txt v1
a.txt v2
a.txt v3 for hotfix
a.txt v3 for iss53
```



**å†æ¬¡addä¸€æ¬¡, commitæäº¤ä¸€æ¬¡.è¿™æ¬¡æ‰åˆå¹¶å®Œæˆ**







## ä¹ã€	å¼€å‘åˆ†æ”¯çš„æ¨¡å¼



#### 9.1	é•¿æœŸå¼€å‘åˆ†æ”¯

![](åˆ†æ”¯å¼€å‘æ¨¡å¼.png)



> - â€‹	**ä¸èƒ½ç›´æ¥åœ¨masteråˆ†æ”¯ä¸Šé¢æ”¹**
> - â€‹    **è‡ªå·±æ¥ä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨è‡ªå·±çš„èŠ±åè¿›è¡Œå‘½åï¼Œæ¯”zmzã€develop**
> - â€‹    **ä¹Ÿä¸èƒ½åœ¨è‡ªå·±æ‹‰å–çš„åˆ†æ”¯ä¸Šæ”¹ï¼ˆdevelopï¼‰**
> - â€‹    **æ¯å¼€å‘ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šé¢å†å»ºä¸€ä¸ªå­åˆ†æ”¯ã€‚ç­‰å…¨éƒ¨åŠŸèƒ½å¼€å‘å®Œæˆï¼Œå°±å…¨éƒ¨æäº¤åˆ°è‡ªå·±çš„åˆ†æ”¯ä¸Šï¼Œè®©äº¤äºˆæµ‹è¯•ï¼Œæµ‹è¯•é€šè¿‡ï¼Œç¨³å®šåï¼Œå°†è‡ªå·±çš„åˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯ä¸Šã€‚ä¸‹æ¬¡å¼€å‘çš„æ—¶å€™å†æ‹‰ä¸€ä¸ªè‡ªå·±çš„åˆ†æ”¯ï¼Œç„¶ååœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¼€å‘åŠŸèƒ½ï¼Œç„¶åä¾æ¬¡å¾ªç¯**







## åã€Gitå­˜å‚¨



**èƒŒæ™¯ï¼š**

â€‹		**æœ‰æ—¶å€™ï¼Œå½“ä½ åœ¨é¡¹ç›®çš„ä¸€éƒ¨åˆ†ä¸Šå·²ç»å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½è¿›å…¥äº†æ··ä¹±çš„çŠ¶æ€ï¼Œè€Œè¿™æ—¶ä½ æƒ³è¦åˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªåˆ†æ”¯åšä¸€ç‚¹åˆ«çš„äº‹æƒ…ã€‚é—®é¢˜æ˜¯,ä½ ä¸æƒ³åšä¸€æ¬¡æäº¤ï¼ˆå› ä¸ºè¿™ä¸ªåŠŸèƒ½è¿˜æ²¡å¼€å‘å®Œï¼Œä¸€èˆ¬å¼€å‘å®Œäº†æ‰ææäº¤ï¼‰ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯`git stash`å‘½ä»¤**



#### 10.1	git stash å‘½ä»¤

##### **10.1.1	å‘½ä»¤ï¼š`git stash  æ ˆå­˜ã€å‹æ ˆï¼ˆè°éŸ³æš‚å­˜ï¼Œæš‚æ—¶å­˜å‚¨ï¼‰`** 

**å•è¯è®°å¿†ï¼š**

> - â€‹	**`stack - å †æ ˆ`**
> - â€‹    **`stash - å­˜å‚¨`**
> - â€‹    **è®°å¿†æŠ€å·§ï¼šstashæ˜¯å­˜åˆ°stackæ ˆä¸Šé¢ã€‚ã€‚ã€‚**

**å¤‡æ³¨ï¼š`git stashå‘½ä»¤ä¼šå°†æœªå®Œæˆçš„ä¿®æ”¹ä¿å­˜åˆ°ä¸€ä¸ªæ ˆä¸Šï¼ˆéµå¾ªå…ˆè¿›åå‡ºï¼Œå‹æ ˆ --ã€‹å¼¹æ ˆï¼‰ï¼Œè€Œä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™é‡æ–°åº”ç”¨ è¿™äº›æ”¹åŠ¨é€šè¿‡`git stash apply`)ä½†æ˜¯è¿™ä¸ªå‘½ä»¤ä¸å¸¸ç”¨**



**æˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹`git stash`ï¼Œ ä¸‹é¢è¿™ä¸ªæŒ‰é’®çš„å‰ç½®æ¡ä»¶æ˜¯æˆ‘ä»¬æœ‰å·²ä¿®æ”¹æœªæš‚å­˜çš„æ–‡ä»¶ã€æ•°æ®æˆ–å†…å®¹**

```bash
$ git stash
warning: LF will be replaced by CRLF in demo.txt.
The file will have its original line endings in your working directory
Saved working directory and index state WIP on damu: f6ed02a 13 commit for demo.txt v2
#åœ¨damuä¸Šä¿å­˜å·¥ä½œç›®å½•å’Œç´¢å¼•çŠ¶æ€WIPï¼šf6ed02a 13 commit for demo.txt v2
```

**æ­¤æ—¶æˆ‘ä»¬`git status`**

```bash
$ git status
On branch damu
nothing to commit, working tree clean
```

**æ­¤æ—¶æˆ‘ä»¬git logå®Œå…¨æ— å¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨ `git log --oneline --decorate --graph --all`çš„æ—¶å€™ä¼šå‘ç°å¦‚ä¸‹æƒ…å†µï¼šå¤šäº†ä¸€æ¡åˆ†æ”¯ï¼Œè€Œä¸”è¿˜ç»™æˆ‘ä»¬åˆå¹¶è¿‡æ¥ã€‚ã€‚**

```bash
$ git log --oneline --decorate --graph --all
*   85c5aa3 (refs/stash) WIP on damu: f6ed02a 13 commit for demo.txt v2 #å¿«é€Ÿåˆå¹¶
|\
| * cf676ce index on damu: f6ed02a 13 commit for demo.txt v2	#åˆ›å»ºåˆ†æ”¯
|/
* f6ed02a (HEAD -> damu) 13 commit for demo.txt v2	#æˆ‘ä»¬æ‰§è¡Œgit stashçš„ä½ç½®
```



**è§£é‡Šï¼šå…¶å®`git stash`æœ¬è´¨è¿˜æ˜¯å¸®æˆ‘ä»¬å»ºäº†ä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åé‡‡ç”¨å¿«é€Ÿåˆå¹¶ï¼Œåˆå¹¶äº†ä¸€æ¬¡ä»£ç ï¼Œç„¶ååˆå°†æŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬æ‰§è¡Œ`git stash`ä½ç½®çš„æäº¤å¯¹è±¡ï¼Œé‡ç½®äº†ä¸€æ¬¡å·¥ä½œåŒºï¼Œç›¸å½“äºä¸€æ¬¡ç‰ˆæœ¬å›é€€**







##### **10.1.2	å‘½ä»¤ï¼š` git stash apply åº”ç”¨,é»˜è®¤åº”ç”¨æ ˆé¡¶çš„å…ƒç´ ï¼Œä¸ä¼šæ‰§è¡Œå¼¹æ ˆï¼ˆåˆ é™¤æ ˆé‡Œé¢çš„å…ƒç´ ï¼‰ï¼Œæ ˆé‡Œé¢è¿˜æœ‰ ä¸å¸¸ç”¨**



##### 10.1.3	å‘½ä»¤ï¼š`git stash apply stash@{0}`ä¸å¸¸ç”¨ï¼ŒçŸ¥é“å°±è¡Œ

- **é€šè¿‡stash@{index}æŒ‡å®šåº”ç”¨æ ˆé‡Œé¢çš„å“ªä¸€ä¸ªå…ƒç´ **



##### **10.1.3	å‘½ä»¤ï¼š`git stash list æŸ¥çœ‹æ ˆä¸­å†…å®¹`**

```bash
$ git stash list
stash@{0}: WIP on damu: f6ed02a 13 commit for demo.txt v2
```



##### 10.1.5	å‘½ä»¤ï¼š`git stash drop + stash@{index}` **ç§»é™¤æŒ‡å®šçš„æ ˆå†…å…ƒç´ **



##### 10.1.4	å‘½ä»¤ï¼š`git stash pop` **åº”ç”¨æ ˆé¡¶çš„å…ƒç´ ï¼Œå¹¶æ‰”æ‰å®ƒ**

ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”º

ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”º

**æˆ‘ä»¬ä¸€èˆ¬ç”¨è¿™ä¸ªç©æ„å–æ ˆç„¶ååˆ é™¤ï¼Œä¿è¯ç”¨ä¸€æ¬¡åˆ é™¤ä¸€æ¬¡ã€‚æ ˆæˆ‘ä»¬å°±æè¿™æ ·ï¼Œä¸éœ€è¦æå¤ªå¤æ‚ï¼Œå¤ªå¤æ‚äº†ã€‚ä½ è‡ªå·±ä¼šè£‚å¼€ã€‚ä½ è‡ªå·±éƒ½æä¸æ¸…æ¥šå“ªé‡Œæ˜¯å“ªé‡Œäº†**



**ğŸ”ºğŸ”ºå¸¸è¯†ï¼šä¸€èˆ¬`git stash pop`é…åˆ`git checkout æ–‡ä»¶å --æ’¤é”€å·¥ä½œåŒºä¸­çš„ä¿®æ”¹`**

**ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ**

> - â€‹	**å› ä¸ºæˆ‘ä»¬æœ‰æ—¶å€™ä¼šå¿˜è®°ï¼Œæˆ‘ä»¬æ ˆä¸­è¿˜æœ‰ä¸œè¥¿å°±ç›´æ¥å¼€å§‹å†™ä»£ç äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å†å»`git stash pop`å°±ä¼šæŠ¥é”™ã€‚ä¸è®©æˆ‘ä»¬å–ï¼Œè®©æˆ‘ä»¬æäº¤äº†å†å–ï¼Œé‚£ä¸æ˜¯æ‰¯æ·¡å˜›ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ’¤é”€å·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œç„¶åå–å‡ºæ¥**
> -    **è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¿˜è®°äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å·²ç»åœ¨å·¥ä½œåŒºä¸­å†™äº†å¾ˆå¤šå¾ˆå¤šäº†ï¼Œè¿™æ—¶å€™æ ˆé‡Œé¢çš„å·²ç»å®Œå…¨è½åäº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`git stash drop + stash@{index}`æ¥å°†æ ˆé‡Œé¢çš„å…ƒç´ ä¸¢æ‰**







## åä¸€ã€åæ‚”è¯

- **å·¥ä½œåŒº çš„åæ‚”è¯**
- **æš‚å­˜åŒº çš„åæ‚”è¯**
- **ç‰ˆæœ¬åº“ çš„åæ‚”è¯**



#### 11.1	å·¥ä½œåŒºçš„åæ‚”è¯

*****

**é¡»çŸ¥ç‚¹ï¼š**

- â€‹	**åœ¨å·¥ä½œåŒºçš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œæ˜¯ä¸éœ€è¦åƒåæ‚”è¯çš„ï¼Œæˆ‘ä»¬ç›´æ¥åˆ é™¤æˆ–è€…`Ctrl + z`å°±å¯ä»¥**
	- **å› ä¸ºä»–è¿˜æ²¡æœ‰è¢«Gitç®¡ç†**
- â€‹    **å·¥ä½œåŒºçš„åæ‚”è¯æ˜¯æ’¤é”€å·¥ä½œåŒºä¸­çš„ä¿®æ”¹ï¼Œä»¥å½“å‰æš‚å­˜åŒºä¸­çš„å†…å®¹ä¸ºæ ‡å‡†**
- â€‹    **ğŸ”ºğŸ”ºå·¥ä½œåŒºæ’¤é”€æ“ä½œåçš„æ–‡ä»¶å†…å®¹è·Ÿå½“å‰æš‚å­˜åŒºä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¿æŒä¸€è‡´**



**å‘½ä»¤ï¼š`git checkout filename`**

**æ³¨æ„ï¼š`git checkout filename`æ˜¯ä»¥å½“å‰æš‚å­˜åŒºä¸ºåŸºç¡€è¿›è¡Œæ¢å¤ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºå¦‚æœæˆ‘ä»¬å…ˆä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œç„¶åaddï¼Œç„¶åå†æ¬¡ä¿®æ”¹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬`git checkout filename`å°†ä½¿å·¥ä½œåŒºå’Œaddä¹‹åçš„æš‚å­˜åŒºä¿æŒä¸€è‡´ï¼ŒåŒç†`git reset HEAD filename`æ˜¯ä¸å½“å‰æäº¤å¯¹è±¡ä¿æŒä¸€è‡´**



#### 11.2	æš‚å­˜åŒºçš„åæ‚”è¯

**å‘½ä»¤ï¼š`git reset HEAD filename`**

**é¡»çŸ¥ç‚¹ï¼š**

- â€‹	**ğŸ”º`git reset HEAD filename ä»¥å,æ–‡ä»¶çŠ¶æ€å˜æˆaddå‰çš„çŠ¶æ€ï¼Œä¸ä¼šåŠ¨å·¥ä½œåŒºä¸­æ–‡ä»¶çš„å†…å®¹ï¼Œåªæœ‰è‡ªå·±å»git checkout filename å»è¿˜åŸåˆ°å½“å‰æš‚å­˜åŒºä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹`**
- â€‹    **è¿™ä¸ªæ—¶å€™å†æ¥ä¸€æ¬¡git checkout filename å°±ç»™ä»–æ‰“å›å®Œå…¨çš„åŸå‹ã€‚å› ä¸ºgit checkout filenameåæ–‡ä»¶å†…å®¹è·Ÿå½“å‰æš‚å­˜åŒºä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¿æŒä¸€è‡´**
- â€‹    **ğŸ”ºğŸ”ºğŸ”ºğŸ”ºğŸ”º`git reset HEAD filename åªä¼šå»æ‹‰å–å½“å‰æäº¤å¯¹è±¡å¯¹åº”çš„æš‚å­˜åŒºä¸­ï¼Œå¯¹åº”æ–‡ä»¶çš„ç´¢å¼•æˆ–è€…è¯´å†…å®¹æ¥è¦†ç›–æœ¬æ¬¡çš„ä¿®æ”¹ï¼Œä»è€Œè¾¾åˆ°åæ‚”çš„ç›®çš„ã€‚å¦‚æœåæ‚”åçš„æš‚å­˜åŒºçš„ç´¢å¼•å·²å’Œå½“å‰æäº¤å¯¹è±¡çš„æš‚å­˜åŒºç´¢å¼•å†…å®¹ä¸€è‡´çš„æ—¶å€™ï¼Œæ— è®ºä½ å†æ‰§è¡Œå¤šå°‘æ¬¡git reset HEAD filename éƒ½ä¸ä¼šå†æ”¹å˜äº†`**
- â€‹    **åªæ”¹å˜æš‚å­˜åŒº**



**æœ¬è´¨ï¼š`git reset HEAD filename` å°±è·Ÿä»–çš„å­—é¢æ„æ€ä¸€æ ·åˆ·æ–°HEADæŒ‡é’ˆï¼Œå°±æ˜¯åˆ·æ–°æš‚å­˜åŒºï¼Œä»å½“å‰åˆ·æ–°ä¼šä¸Šä¸€æ¬¡çš„æš‚å­˜åŒºçŠ¶æ€ã€‚**



#### 11.3	å·¥ä½œåŒº+æš‚å­˜åŒºåæ‚”çš„ä¸‰ç§åœºæ™¯

```bash
å¯¹å·¥ä½œåŒºä¸­æ–‡ä»¶çš„ä¿®æ”¹åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š

ï¼ˆ1ï¼‰ä¿®æ”¹åè¿˜æ²¡æœ‰git add

ï¼ˆ2ï¼‰ä¿®æ”¹å·²ç»git add

ï¼ˆ3ï¼‰ğŸ”ºğŸ”ºğŸ”ºğŸ”ºä¿®æ”¹å·²ç»git addï¼Œå¹¶å†æ¬¡è¿›è¡Œä¿®æ”¹

å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œç›´æ¥ä½¿ç”¨git checkout -- æ–‡ä»¶ï¼Œå³å¯æ’¤é”€ä¿®æ”¹ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„æ ·å­ã€‚

ç¬¬ä¸‰ç§æƒ…å†µ å…ˆä½¿ç”¨git checkout filename å†git reset HEAD filenameï¼Œç„¶åå†git checkout filenameçš„æ“ä½œå’Œ å…ˆgit reset HEAD filenameå†git checkout filenameæ“ä½œï¼Œæœ€åæ–‡ä»¶çš„å†…å®¹ä¸€è‡´ï¼Œæ‰€ä»¥å•Šï¼Œè¿˜æ˜¯å…ˆgit reset ç„¶åå†git checkoutå¥½ç‚¹
```





#### 11.4	ï¼ˆç‰ˆæœ¬åº“åæ‚”è¯

**é€‚åˆçš„åœºæ™¯**

> - â€‹	**æ³¨é‡Šå†™é”™äº†ï¼Œæƒ³è¦åæ‚”ï¼Œåˆä¸æƒ³é‡æ–°æäº¤ä¸€æ¬¡**
> - â€‹    **è¿˜æœ‰æ–‡ä»¶å¿˜è®°æäº¤äº†ï¼Œåˆä¸æƒ³é‡æ–°æäº¤ä¸€æ¬¡**
> - â€‹    **æäº¤çš„æŸä¸ªæ–‡ä»¶è¿˜æœ‰é”™è¯¯ï¼Œä¸”è¿˜æœ‰æŸäº›æ–‡ä»¶æœªæäº¤ï¼Œåˆä¸æƒ³é‡æ–°æäº¤ä¸€æ¬¡**

**åœºæ™¯1ï¼šæäº¤æ³¨é‡Šå†™é”™äº†ï¼Œè¿›è¡Œæ³¨é‡Šåæ‚”**

****

**å‘½ä»¤ï¼š`git commit --amend`**ï¼Œ**æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œä¼šå‡ºç°å¦‚ä¸‹æ³¨é‡Švimç¼–è¾‘æ¡†ï¼Œæ¯ä¸€æ¬¡è¿›å»ï¼Œæäº¤å¯¹è±¡éƒ½è¦å‘ç”Ÿæ”¹å˜ã€‚å› ä¸ºæ—¶é—´æˆ³å‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯åˆ†æ”¯çº¿ä¸Šä¼šè¿›è¡Œè¦†ç›–**

```bash
$ git commit --amend
# ä¸‹é¢æ˜¯vimæ“ä½œ
 damu.txt v2ç‰ˆæœ¬	# æˆ‘ä»¬ä¿®æ”¹æˆ damu.txt v2ç‰ˆæœ¬

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# Date:      Mon May 31 01:07:06 2021 +0800
#
# On branch master
# Changes to be committed:
#       modified:   a.txt
#
```

**åˆ©ç”¨`git log --oneline --decorate --graph --all`å¯¹æ¯”åƒæ³¨é‡Šåæ‚”è¯ä¹‹å‰å’Œä¹‹åçš„å¯¹æ¯”**

**ä¹‹å‰ï¼š**

```bash
$ git lol
* a3df16a (HEAD -> damu) damu.txt v2ç‰ˆæœ¬	# å†™é”™çš„æ³¨é‡Š
* 0b38599 damu.txt v1ç‰ˆæœ¬
* b148797 (master) åˆ é™¤test.txt , æ–°å»ºdamu.txt
* 0060966 ä¿®æ”¹testçš„åå­—
* 2354526 test v1ç‰ˆæœ¬
```

**ä¹‹å:**

```bash
$ git lol
* b865785 (HEAD -> damu) damu.txt v2ç‰ˆæœ¬ æµ‹è¯•commit -amendå‘½ä»¤	#  ä¿®æ”¹åçš„æ³¨é‡Š
* 0b38599 damu.txt v1ç‰ˆæœ¬
* b148797 (master) åˆ é™¤test.txt , æ–°å»ºdamu.txt
* 0060966 ä¿®æ”¹testçš„åå­—
* 2354526 test v1ç‰ˆæœ¬
```

**ç»“è®ºï¼šä¿®æ”¹åæäº¤ä¼šè¦†ç›–ä¹‹å‰çš„æäº¤ï¼Œä½†æ˜¯æäº¤å¯¹è±¡çš„å“ˆå¸Œå‘ç”Ÿäº†æ”¹å˜**

***

**åœºæ™¯2ï¼šæäº¤äº†ä¸€æ¬¡ï¼Œå‘ç°ä¸Šæ¬¡æäº¤çš„æ–‡ä»¶ä¸­è¿˜æœ‰é”™è¯¯ï¼Œè€Œä¸”è¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶æ²¡æœ‰æäº¤ã€‚ä¸”è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆä¸æƒ³è®©åˆ†æ”¯ä¸­å¤šä¸€æ¬¡æäº¤**

**è§£å†³ï¼šé‡æ–°ä¿®æ”¹åœ¨å·¥ä½œåŒºä¿®æ”¹é”™è¯¯çš„æ–‡ä»¶ï¼Œç„¶åå°†ä¿®æ”¹åçš„æ–‡ä»¶å’Œä¸Šä¸€æ¬¡éœ€è¦æäº¤è€Œæ²¡æœ‰æäº¤çš„æ–‡ä»¶ä¸€èµ·`git add `ä¸€ä¸‹ï¼Œ ç„¶åå†`git commit --amend`å°±è§£å†³äº†è¿™ä¸€æ¬¡çš„é—®é¢˜äº†**







## åäºŒã€reset é‡ç½®ä¸‰éƒ¨æ›²



**å‰ç½®æ¡ä»¶ï¼šå‡è®¾æˆ‘ä»¬ä¿®æ”¹äº†file.txt æ–‡ä»¶ä¸‰æ¬¡å¹¶æäº¤äº†ä¸‰æ¬¡ã€‚ç°åœ¨çš„å†å²æŸ¥çœ‹èµ·æ¥æ˜¯å¦‚ä¸‹è¿™æ ·çš„**

<img src="resetä¸‰éƒ¨æ›²æ¡ˆä¾‹çŠ¶æ€å›¾.png"  />







#### 12.1	ç¬¬ä¸€éƒ¨æ›²`git reset --soft HEAD~/æäº¤å¯¹è±¡å“ˆå¸Œ`

**æ‰§è¡ŒåŠ¨ä½œï¼š`--soft åªæœ‰ä¸€æ­¥`**

> 1. â€‹	**æ”¹å˜masterå†…å®¹ï¼ŒåŒæ—¶æ”¹å˜HEAD**





**å¤‡æ³¨ï¼š**

> - â€‹	ğŸ”º**`git checkout branchname`åªç§»åŠ¨/ä¿®æ”¹HEADæŒ‡é’ˆï¼Œä¸ä¿®æ”¹/ç§»åŠ¨master**
> - â€‹    ğŸ”º**`git reset --soft HEAD~`ä¿®æ”¹/ç§»åŠ¨masterï¼Œå¸¦ç€HEADä¸€èµ·æ”¹å˜ï¼Œï¼ˆè¿™é‡Œæˆ‘ä»¬ä»¥masteråˆ†æ”¯ä¸ºä¾‹ï¼‰å°±æ˜¯ä¿®æ”¹refs/headsç›®å½•ä¸­masteræ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ç”±äºHEADæ–‡ä»¶æ˜¯æŒ‡å‘masteræ–‡ä»¶çš„ï¼Œmasteræ–‡ä»¶ä¸­çš„å†…å®¹æ”¹å˜ã€‚HEADä¹Ÿå°±è¢«å¸¦ç€ä¸€èµ·æ”¹å˜äº†ã€‚æ‰€ä»¥å«HEADå’Œåˆ†æ”¯ä¸€èµ·ç§»åŠ¨**
> - â€‹    **ğŸ”º`HEAD~`ç›¸å½“äºä¸€ä¸ªåˆ«åï¼Œä»£è¡¨ä¸Šä¸€ä¸ªçš„æäº¤å¯¹è±¡å“ˆå¸Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ç”¨å“ˆå¸Œå€¼ä»£æ›¿** 
> 	- **ğŸ”º`HEAD~ == å“ˆå¸Œ`**   



**æˆ‘ä»¬æ‰§è¡Œä¸€æ¬¡`git reset --soft HEAD~`å†å²è®°å½•å°±å˜æˆäº†ä¸‹å›¾è¿™æ ·**

**ç»“è®ºï¼ˆæ‰€åŠ¨åŒºåŸŸï¼‰ï¼š**

> - â€‹	**æš‚å­˜åŒºå’Œå·¥ä½œåŒºéƒ½æ²¡æœ‰å˜**
> - â€‹    **ğŸ”ºä»–åªåŠ¨masterå’ŒHEADï¼Œå…¶ä»–éƒ½ä¸åŠ¨,å°±æ˜¯è¯´åŠ¨äº†æäº¤åŒºã€‚**
> - â€‹    **æ”¹å˜äº†masterï¼Œå¯¼è‡´HEADä¹Ÿå˜äº†ï¼ˆå› ä¸ºHEADæ–‡ä»¶æŒ‡å‘masteræ–‡ä»¶ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¯´HEADå’Œmasteréƒ½å˜äº†ã€‚åé¢å°±è¿™æ ·è¯´äº†**
> - â€‹    **ğŸ”º`git status`çš„æ—¶å€™æˆ‘ä»¬å‘ç°æœ‰æ–‡ä»¶æœªè¢«æäº¤ã€‚è¿™æ˜¯å› ä¸ºæ‰§è¡Œ`git reset --soft HEAD~`ä¹‹åæˆ‘ä»¬åªåŠ¨HEADå’Œmasterï¼Œå…¶ä»–éƒ½ä¸å˜ã€‚æ‰§è¡Œ`git status`çš„æ—¶å€™ï¼Œgitä¼šå»å¯¹æ¯”å½“å‰æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“å¯¹åº”çš„æš‚å­˜åŒºï¼Œæˆ–è€…è¯´masteræŒ‡å‘çš„æäº¤å¯¹è±¡æ‰€å¯¹åº”çš„æš‚å­˜åŒºï¼Œæ˜¯å¦ä¸€è‡´ã€‚å½“å‘ç°ä¸ä¸€æ ·ï¼Œæç¤ºæœ‰å·²æš‚å­˜å¾…æäº¤çš„æ–‡ä»¶**
> - â€‹    **`æ‰§è¡Œgit status`çš„åˆ°å¦‚ä¸‹**

```python
$ git status
On branch master
Changes to be committed:	# éœ€è¦è¢«æäº¤
  (use "git reset HEAD <file>..." to unstage)

        modified:   file.txt	#ç»¿è‰²
 """
 **Gitæš‚å­˜åŒºæ˜¯å¦éœ€è¦æ‰§è¡Œcommitæäº¤ï¼Œæ˜¯é€šè¿‡å½“å‰æš‚å­˜åŒºä¸æäº¤å¯¹è±¡æš‚å­˜åŒºå¯¹æ¯”æ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­çš„ï¼Œä¸€è‡´ä¸æç¤ºcommitï¼Œä¸ä¸€è‡´æç¤ºéœ€è¦commit**, --softåªæ”¹masterå’ŒHEADï¼ˆç›¸å½“äºåªæ”¹å˜æäº¤å¯¹è±¡ï¼‰ï¼Œæ‰€ä»¥ä¸ä¸€è‡´ï¼Œæç¤ºéœ€è¦æäº¤

**Gitå·¥ä½œåŒºæ˜¯å¦éœ€è¦è¢«æš‚å­˜ï¼Œæ˜¯é€šè¿‡å·¥ä½œåŒºå‡å®šç”Ÿäº§çš„æš‚å­˜åŒºä¸å½“å‰æš‚å­˜åŒºæ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­ï¼Œä¸€è‡´ä¸æç¤ºaddæš‚å­˜ï¼Œä¸ä¸€è‡´æç¤ºéœ€è¦addæš‚å­˜**  --softä¸æ”¹å˜æš‚å­˜åŒºï¼Œæ‰€ä»¥ä¸éœ€è¦æš‚å­˜
 """
```

![](reset-2.png)





#### 12.2	ç¬¬äºŒéƒ¨æ›²`git reset --mixed HEAD~/æäº¤å¯¹è±¡å“ˆå¸Œ`

![](reset-3.png)

**æ‰§è¡ŒåŠ¨ä½œï¼šä¸¤æ­¥**

> 1. â€‹	**æ”¹å˜masteræ–‡ä»¶ä¸­å†…å®¹ï¼Œç§»åŠ¨HEADæŒ‡é’ˆ**
> 2. â€‹    **ç”¨HEADæŒ‡é’ˆæ‰€æŒ‡çš„æäº¤å¯¹è±¡çš„æš‚å­˜åŒºè¦†ç›–å½“å‰æš‚å­˜åŒº**



**æ‰€åŠ¨åŒºåŸŸ**

> - â€‹	**`git  reset [--mixed] HEAD~/æäº¤å¯¹è±¡å“ˆå¸Œ` åŠ¨master ï¼ˆåŒæ—¶å¸¦ç€HEADä¸€èµ·åŠ¨)ï¼Œä¹Ÿå°±æ˜¯è¯´åŠ¨äº†æäº¤åŒº**
> - â€‹    **æäº¤åŒº**
> - â€‹    **åŠ¨æš‚å­˜åŒº**
> - â€‹    **ä¸åŠ¨å·¥ä½œåŒº**
> - â€‹    **æ‰§è¡Œ`git status`å¾—åˆ°å¦‚ä¸‹(æœªæš‚å­˜çš„æ–‡ä»¶)**

```python
$ git status
On branch master
Changes not staged for commit:	# æœªæš‚å­˜ï¼Œéœ€è¦add æš‚å­˜
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   file.txt	# çº¢è‰²
"""
 **Gitæš‚å­˜åŒºæ˜¯å¦éœ€è¦æ‰§è¡Œcommitæäº¤ï¼Œæ˜¯é€šè¿‡å½“å‰æš‚å­˜åŒºä¸æäº¤å¯¹è±¡æš‚å­˜åŒºå¯¹æ¯”æ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­çš„ï¼Œä¸€è‡´ä¸æç¤ºcommitï¼Œä¸ä¸€è‡´æç¤ºéœ€è¦commit**, --mixedæ”¹masterå’ŒHEADï¼ˆç›¸å½“äºæ”¹å˜æäº¤å¯¹è±¡ï¼‰ï¼Œå’Œæš‚å­˜åŒºã€‚è¿™æ—¶å€™æš‚å­˜åŒºå’Œæäº¤å¯¹è±¡çš„æš‚å­˜åŒºéƒ½æ˜¯HEADæ‰€æŒ‡å‘çš„ï¼Œä¿æŒä¸€è‡´ï¼Œä¸éœ€è¦commit

**Gitå·¥ä½œåŒºæ˜¯å¦éœ€è¦è¢«æš‚å­˜ï¼Œæ˜¯é€šè¿‡å·¥ä½œåŒºå‡å®šç”Ÿäº§çš„æš‚å­˜åŒºä¸å½“å‰æš‚å­˜åŒºæ˜¯å¦ä¸€è‡´æ¥åˆ¤æ–­ï¼Œä¸€è‡´ä¸æç¤ºaddæš‚å­˜ï¼Œä¸ä¸€è‡´æç¤ºéœ€è¦addæš‚å­˜**  --mixedè¦æ”¹å˜æš‚å­˜åŒºï¼Œè¿™æ˜¯å·¥ä½œåŒºå‡å®šç”Ÿæˆçš„æš‚å­˜åŒºä¸å½“å‰æš‚å­˜åŒºä¸ä¸€è‡´ï¼Œæ‰€ä»¥æç¤ºéœ€è¦add
"""
```



**ç‰¹æ®Šè®²è§£ï¼š`git reset [--mixed] commitid filename`, åªè¦åé¢åŠ äº†filenameï¼Œåˆ™æäº¤åŒºå°±ä¸ä¼šæ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡è¿™ä¸ªcommitidæ˜¯å¦æ˜¯HEADæˆ–è€…å…¶ä»–ç‰ˆæœ¬çš„æäº¤å¯¹è±¡ï¼Œå½“æŒ‡å®šäº†filenameï¼Œæäº¤åŒºå°±ä¸ä¼šå˜ï¼Œè¿™æ ·å†™çš„æ„ä¹‰æ˜¯ï¼ŒæŒ‡å®šæš‚å­˜åŒºè¿˜åŸæˆå“ªä¸ªç‰ˆæœ¬çš„æ•°æ®**

- **åªåŠ¨æš‚å­˜åŒº**









#### 12.3	**`--soft`å’Œ`--mixed`æ€»ç»“**

> - â€‹	**`soft`åªåŠ¨HEADå’Œmaster**
> - â€‹    **`--mixed`åŠ¨HEADå’Œmasterè¿˜ä¼šå»åŠ¨æš‚å­˜åŒºï¼Œæš‚å­˜åŒºè¦†ç›–**
> - â€‹    **éƒ½ä¸ä¼šå»åŠ¨å·¥ä½œåŒº**
> - â€‹    **è¦æƒ³è¿˜åŸï¼Œå°±æ˜¯ä»--softåæ‚”å¯ä»ä»--softå›å»ä¹Ÿå¯ä»¥ä»--mixedå›å»ï¼Œè€Œä»--mixedåæ‚”å°±ä»--mixedå›å»ã€‚å¦‚æœç”¨--softä½ éœ€è¦commitä¸€æ¬¡**
> - â€‹    **--softä¸€èˆ¬ç”¨äºçº¿ä¸Šå›æ»š**





#### 12.4	ç¬¬ä¸‰éƒ¨æ›²`git reset --hard HEAD~/æäº¤å¯¹è±¡å“ˆå¸Œ `



**æ‰€åŠ¨åŒºåŸŸ**

> - â€‹	**`git  reset --hard HEAD~/æäº¤å¯¹è±¡å“ˆå¸Œ` åŠ¨master ï¼ˆåŒæ—¶å¸¦ç€HEADä¸€èµ·åŠ¨ï¼‰ï¼ˆæ”¹æäº¤åŒº--æäº¤å¯¹è±¡ï¼‰**
> - â€‹    **åŠ¨æš‚å­˜åŒº**
> - â€‹    **åŠ¨å·¥ä½œåŒº**
> - â€‹    **å¼ºåˆ¶è¦†ç›–ï¼Œå·¥ä½œåŒºã€‚å¦‚æœæœ‰åˆå§‹åŒ–æ–‡ä»¶ï¼Œç›´æ¥ç»™ä½ å¹²æ‰ã€‚è¿™ä¸ªç©æ„æ˜¯ç”¨ä¸¢æ•°æ®çš„é£é™©**





#### 12.5	è·¯å¾„reset xxx CommitHashï¼ˆé»˜è®¤æ˜¯HEADï¼Œå¯ä»¥ä¸å†™ï¼‰ +  filename/path

**è¯­æ³•ï¼š`reset xxx CommitHashï¼ˆé»˜è®¤æ˜¯HEADï¼‰ +  filename/path`**

**é¡»çŸ¥ï¼šåªæœ‰`git reset [--mixed] HEAD æ”¯æŒåœ¨åé¢åŠ filename/pathå…¶ä»–å‡ ä¸ªéƒ½ä¸è¡Œã€‚ä¸ºä»€ä¹ˆè¿˜è¯´å‘¢ï¼Ÿå› ä¸ºå…¶ä»–æ— æ³•é€šè¿‡è¯­æ³•æ£€æŸ¥ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰æ„ä¹‰ï¼Œæ–¹ä¾¿ç†è§£å®ƒè¡ç”Ÿå‡ºæ¥çš„å‘½ä»¤**

**å¤‡æ³¨ï¼šå‰é¢è®²è¿°äº†resetåŸºæœ¬å½¢å¼çš„è¡Œä¸ºï¼Œä¸è¿‡ä½ è¿˜å¯ä»¥ç»™å®ƒæä¾›ä¸€ä¸ªä½œç”¨è·¯å¾„ã€‚è‹¥æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œ<font color='red'>reset å°†ä¼šè·³è¿‡ç¬¬ä¸€æ­¥æ“ä½œï¼ˆå› ä¸ºæŸäººæ˜¯å½“å‰HEADï¼Œå½“å‰HEADä¸å˜ï¼Œæ‰€ä»¥ç›¸å½“äºè·³è¿‡ï¼Œæ„Ÿè§‰è·³è¿‡ä¸€è¯ä¸å‡†ç¡®ï¼‰</font>ï¼Œå¹¶ä¸”å°†ä»–çš„ä½œç”¨èŒƒå›´é™å®šä¸ºæŒ‡å®šçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶é›†åˆã€‚è¿™æ ·åšè‡ªç„¶æœ‰å®ƒçš„é“ç†ï¼Œå› ä¸ºHEADåªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä½ æ— æ³•è®©å®ƒåŒæ—¶æŒ‡å‘ä¸¤ä¸ªæäº¤ä¸­å„è‡ªçš„ä¸€éƒ¨åˆ†ã€‚ä¸è¿‡ç´¢å¼•å’Œå·¥ä½œç›®å½•å¯ä»¥éƒ¨åˆ†æ›´æ–°ï¼Œæ‰€ä»¥é‡ç½®ä¼šç»§ç»­è¿›è¡Œç¬¬2æ­¥éª¤ï¼ˆä¿®æ”¹æš‚å­˜åŒºï¼‰**

â€‹		  **ç°åœ¨ï¼Œå‡å¦‚æˆ‘ä»¬è¿è¡Œ`git reset file.txt(è¿™å…¶å®å°±æ˜¯git reset --mixed HEAD file.txtçš„ç®€å†™å½¢å¼)`ã€å®ƒä¼šï¼š**

â€‹		**ç§»åŠ¨HEADåˆ†æ”¯çš„æŒ‡å‘å½“å‰HEADï¼Œç”±äºæ˜¯å½“å‰HEADæäº¤åŒºå’Œæš‚å­˜åŒºè¿›è¡Œè¦†ç›–ï¼Œç”±äºåŠ äº†file.txt,æŒ‡ååªè¦†ç›–file.txçš„ç´¢å¼•ï¼Œä»è€Œå®ç°file.txtçš„åæ‚”æ“ä½œã€‚å¦‚æœä¸åŠ fileï¼Œæš‚å­˜åŒºå…¨éƒ¨è¦†ç›–ï¼Œæ–‡ä»¶å…¨éƒ¨åæ‚”**



#### 12.5	reset ä¸‰éƒ¨æ›² å¯¹åº” ä¸‰ç§åæ‚”è¯

**é¡»çŸ¥ï¼šåªæœ‰`git reset [--mixed] HEAD æ”¯æŒåœ¨åé¢åŠ filename/pathå…¶ä»–å‡ ä¸ªéƒ½ä¸è¡Œï¼Œä»–ä»¬ç”¨å…¶ä»–å‘½ä»¤æ›¿ä»£`**



***



**`git reset HEAD filename`**				**`git reset [--mixed] HEAD path(filename)`**   (çœŸç­‰äº)å¯ä»¥çœŸå®æ“ä½œã€‚ä¸‰éƒ¨æ›²ä¸­åªæœ‰è¿™ä¸€ä¸ªæ”¯æŒè¿™ç§å†™æ³•ã€‚è¡¨ç¤ºä¿®æ”¹åˆ°HEADæŒ‡å‘çš„æäº¤å¯¹è±¡ï¼Œè¦†ç›–pathï¼ˆfilenameï¼‰

***



**`git checkout filename`å°±æ˜¯æ‹¿å½“å‰HEADé‡Œé¢ï¼ˆå½“å‰æäº¤å¯¹è±¡ï¼‰å·¥ä½œç›®å½•åŒºæ›¿æ¢**

















# åä¸‰ã€å‘½ä»¤



```bash
"""
åº•å±‚å‘½ä»¤
"""
git hash-object -w æ–‡ä»¶			# ç”Ÿäº§gitå¯¹è±¡è¿”å›gitå¯¹è±¡å“ˆå¸Œ
git update-index --add --cacheinfo 10064 gitå¯¹è±¡å“ˆå¸Œ ç´¢å¼•å	# åœ¨æš‚å­˜åŒºåˆ›å»ºç´¢å¼•ï¼Œå•¥ä¹Ÿä¸è¿”å›
git write-tree					# ç»™æš‚å­˜åŒºæ‹ä¸ªå¿«ç…§ï¼Œç”Ÿäº§æ ‘å¯¹è±¡ï¼Œè¿”å›æ ‘å¯¹è±¡ç´¢å¼•
git ls-files -s					# å‚çœ‹æš‚å­˜åŒºï¼Œ æš‚å­˜åŒºå°±æ˜¯ä¸€ç³»åˆ—ç´¢å¼•å…³ç³» gitå¯¹è±¡ : ç´¢å¼•å
git cat-file -t å“ˆå¸Œ/HEAD		   #æŸ¥çœ‹å“ˆå¸Œå¯¹åº”çš„ç±»å‹ï¼ŒHEADä»£è¡¨æœ€æ–°ä¸€æ¬¡æäº¤å¯¹è±¡çš„å“ˆå¸Œ
git cat-file -p å“ˆå¸Œ/HEAD		   #æŸ¥çœ‹å“ˆå¸Œå¯¹åº”çš„å†…å®¹ï¼ŒHEADä»£è¡¨æœ€æ–°ä¸€æ¬¡æäº¤å¯¹è±¡çš„å“ˆå¸Œ




"""
é«˜å±‚å‘½ä»¤
"""
git commit					# å†™è¶…é•¿æ³¨é‡Šï¼Œvimç¼–è¾‘æ¡†
git commit -m
git commit -a 				#è·³è¿‡æš‚å­˜åŒºï¼Œ è¿™ä¸ªè¿˜æ˜¯ä¸è¦ä½¿ç”¨çš„å¥½
git commit --amend			#æ³¨é‡Šåæ‚” -- å°±æ˜¯ç„¶ä½ é‡æ–°ç¼–è¾‘æ³¨é‡Š
git log						# æŸ¥çœ‹æäº¤æ—¥å¿—ï¼Œ æŒ‰Qé”®é€€å‡º
git log --pretty=oneline	#æ¼‚äº®è¾“å‡º
git log --oneline			#ä¹Ÿæ˜¯æ¼‚äº®è¾“å‡º
git log --oneline --decorate --graph --all	#æŸ¥çœ‹å®Œæ•´çš„åˆ†æ”¯å›¾
git reflog					#å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„commitå’Œåˆ‡æ¢åˆ†æ”¯
git branch					#æ˜¾ç¤ºåˆ†æ”¯åˆ—è¡¨
git branch åˆ†æ”¯å			  #åˆ›å»ºåˆ†æ”¯
git branch -v				#æŸ¥çœ‹æ¯ä¸€ä¸ªåˆ†æ”¯æœ€åä¸€æ¬¡æäº¤
git branch -d åˆ†æ”¯å		  #åˆ é™¤ä¸€ä¸ªåˆ†æ”¯(ç©ºåˆ†æ”¯,æ— å†…å®¹çš„åˆ†æ”¯,æˆ–è€…å·²ç»è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯)
git branch -D åˆ†æ”¯å 		  #å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªåˆ†æ”¯(åˆ†æ”¯ä¸Šæœ‰å†…å®¹)
ğŸ”ºgit branch åˆ†æ”¯å + commitHashå­—ç¬¦ä¸² #æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶ä½¿åˆ†æ”¯æŒ‡å‘å¯¹åº”çš„æäº¤å¯¹è±¡ï¼Œè¿™ä¸ªè¶…çº§æœ‰ç”¨ï¼ˆåœ¨ä»»æ„ä½ç½®æ‹‰å–åˆ†æ”¯ï¼‰
git checkout åˆ†æ”¯å		  #åˆ‡æ¢åˆ†æ”¯	
ğŸ”ºgit checkout -b åˆ†æ”¯å		  #åœ¨å½“å‰ä½ç½®åˆ›å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢è¿‡å»ç­‰ä»·äºgit brancn åˆ†æ”¯åï¼› git checkout åˆ†æ”¯å	
git checkout filename 		#å·¥ä½œåŒºåæ‚”ï¼Œä»¥å½“å‰æš‚å­˜åŒºä¸ºåŸºç¡€ï¼Œæ¢å¤åˆ°å’Œå½“å‰æš‚å­˜åŒºä¸€æ ·ã€‚å¦‚æœæ˜¯ä¸€ä¸ªåˆå§‹åŒ–çš„æ–‡ä»¶ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤ä¼šæŠ¥é”™ï¼Œå› ä¸ºæš‚å­˜åŒºä¸­éƒ½æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæ— æ³•åŒ¹é…ï¼Œæ‰€ä»¥æŠ¥é”™
ğŸ”ºgit checkout -b åˆ†æ”¯å hashcommit	æŒ‡å®šä½ç½®åˆ›å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢è¿‡å»

ğŸ”ºgit checkout HEAD filename  #å·¥ä½œåŒºå’Œæš‚å­˜åŒºåæ‚”ï¼Œä»¥å½“å‰æäº¤å¯¹è±¡å¯¹åº”çš„æš‚å­˜åŒºä¸ºåŸºç¡€ï¼Œè¿›è¡Œæ¢å¤å·¥ä½œåŒºåæ‚”ï¼Œä»¥å½“å‰æäº¤å¯¹è±¡ä¸ºåŸºç¡€è¿›è¡Œæš‚å­˜åŒºåæ‚”ï¼Œç›¸å½“äºgit reset --hard HEAD filename, æäº¤å¯¹è±¡ä¸å˜ï¼Œå·¥ä½œåŒºå’Œæš‚å­˜åŒºåæ‚”
ğŸ”ºgit checkout commitid filename # å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸­çš„filenameè¿›è¡Œåæ‚”ï¼Œæäº¤å¯¹è±¡ä¸å˜ï¼Œä»¥commitidå¯¹åº”çš„æäº¤å¯¹è±¡ä¸ºåŸºç¡€ï¼Œè¿›è¡Œåæ‚”æ¢å¤filename
ğŸ”ºgit checkout .				#å·¥ä½œåŒºå…¨éƒ¨æ–‡ä»¶åæ‚”å¤åŸæˆå½“å‰æš‚å­˜åŒºçš„æ ·å­

ğŸ”º git checkout ä¸»è¦æ˜¯ç”¨äºç§»åŠ¨HEAD,å³.gitç›®å½•ä¸‹  HEADçš„å€¼ï¼Œrefs/branchs  ä¸­çš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ—¢ç„¶ä¸å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆgit lol æ—¶å€™ï¼Œåªæœ‰HEADåœ¨ç§»åŠ¨ï¼Œåˆ†æ”¯éƒ½æ²¡æœ‰åŠ¨ï¼Œå› ä¸ºrefs/branchs  ä¸­çš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™ï¼Œä¼šå‘ç°å…¶ä»–åˆ†æ”¯ä¾æ—§å­˜åœ¨ã€‚ã€‚ğŸ”ºå…¶ä¸­git      checkout commitid filename çš„æ—¶å€™ï¼Œå®ƒä¸ä¼šæ”¹å˜refs/branchsä¸­çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨æ¥è¿›è¡Œå·¥ä½œåŒºå›æ»šæˆ–è€…åæ‚”

ğŸ”ºgit reset --hard / --mixed /--soft  æ”¹å˜refs/branchs ä¸­çš„å€¼ï¼Œç”±äº.gitç›®å½•ä¸‹ HEADæ–‡ä»¶ä¸­çš„å€¼æŒ‡å‘refs/branchsä¸­çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ï¼Œåˆ†æ”¯æ”¹å˜ï¼Œå¸¦ç€HEADä¸€èµ·ç§»åŠ¨




git merge					#åˆå¹¶åˆ†æ”¯
git stash					#å­˜åˆ°æ ˆé‡Œé¢	 ç”¨äºåˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œåˆä¸æƒ³æäº¤å½“å‰çš„ä¸œè¥¿ï¼Œæ‰€ä»¥å¼•å…¥è¿™ä¸ªç©æ„ï¼Œå¯¹äºåˆå§‹åŒ–çš„æ–‡ä»¶ï¼Œéœ€è¦addä¸€ä¸‹äº†æ‰å¯ä»¥stashï¼Œå¯¹äºå·²ç»è¢«ç‰ˆæœ¬åº“ç®¡ç†çš„æ–‡ä»¶ï¼Œaddå’Œä¸addéƒ½å¯ä»¥ï¼Œstash
git stash list				#æŸ¥çœ‹å †æ ˆé‡Œé¢çš„å†…å®¹
git stash pop				#å¼¹æ ˆï¼ˆå…ˆå¼•ç”¨ååˆ é™¤ï¼‰
git stash drop stash@{index}#ä¸å¼•ç”¨ç›´æ¥ä¸¢æ‰

git reset [--mixed] commitid			# ç‰ˆæœ¬å›é€€ï¼Œå›é€€æš‚å­˜åŒºå’Œæäº¤åŒº
git reset [--mixed] HEAD filename 		# æš‚å­˜åŒºåæ‚”
git reset [--mixed] commitid filename 	# æäº¤åŒºä¸å˜ï¼Œæš‚å­˜åŒºå˜æˆcommitid å¯¹åº”çš„æš‚å­˜åŒº
git reset --soft HEAD~			# åªä¿®æ”¹æäº¤åŒº


git checkout filename			# ä»¥å½“å‰æš‚å­˜å»ä¸ºåŸºç¡€ï¼Œè¿›è¡Œåæ‚”

git checkout HEAD filename 		# ä»¥HEADæäº¤å¯¹è±¡ä¸ºåŸºç¡€ï¼Œå¯¹filenameè¿›è¡Œ æš‚å­˜åŒºå’Œå·¥ä½œå»åæ‚”

git checkout commiwwtid filename	# ä»¥commitidæäº¤å¯¹è±¡ä¸ºåŸºç¡€ï¼Œå¯¹filenameè¿›è¡Œï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºå¾—åæ‚”ï¼Œè¦†ç›–ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»å…¸çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œç„¶åæäº¤åˆ°æš‚å­˜åŒºï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¼šæŠ¥é”™ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯ä»¥æäº¤åŒºä¸ºåŸºç¡€ï¼Œç”±äºæ˜¯æ–°å»ºçš„æ–‡ä»¶ï¼Œæäº¤åŒºè¿˜æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥å•Šè¦æŠ¥æ— æ³•åŒ¹é…æ”¹æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™åªæœ‰ä½¿ç”¨git reset --mixed HEAD filenameï¼Œè¿™ä¸ªå…¶å®æš‚å­˜åŒºä¹Ÿæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯t

git reset --hard HEAD~/commitid	# å·¥ä½œåŒº æš‚å­˜åŒº  æäº¤å¯¹è±¡å…¨éƒ¨åæ‚”æˆ commitidå¯¹åº”å¾—æ•°æ®



git diff ï¼š å¯¹æ¯”å·¥ä½œåŒº(æœª git add)å’Œæš‚å­˜åŒº(git add ä¹‹å)
git diff file	:å¯¹æ¯”å·¥ä½œåŒºåŒºå’Œæš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶ä¸åŒä¹‹å¤„

git diff --cached: å¯¹æ¯”æš‚å­˜åŒº(git add ä¹‹å)å’Œç‰ˆæœ¬åº“(git commit ä¹‹å)
git diff --cached file	: å¯¹æ¯”æŒ‡å®šæ–‡ä»¶åœ¨æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“ä¸­çš„ä¸åŒ

git diff HEAD: å¯¹æ¯”å·¥ä½œåŒº(æœª git add)å’Œç‰ˆæœ¬åº“(git commit ä¹‹å)
git diff HEAD filne ï¼š å¯¹æ¯”æŒ‡å®šæ–‡ä»¶åœ¨å·¥ä½œç›®å½•å’Œç‰ˆæœ¬åº“ä¸­çš„ä¸åŒ

git diff branch1 branch2 		# æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯ä¸åŒ,è¿™ä¸¤ä¸ªåˆ†æ”¯å¯ä»¥æ˜¯è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯,ä¸€èˆ¬è¿™æ ·ç”¨ git diff å½“å‰æœ¬åœ°åˆ†æ”¯ å½“å‰æœ¬åœ°åˆ†æ”¯å¯¹äºçš„è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯   ï¼Œ è¿™æ ·æ¥æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„ä¸åŒ
git diff branch1 branch2 file  	# ä¸¤ä¸ªåˆ†æ”¯ç‰ˆæœ¬åº“æŒ‡å®šæ–‡ä»¶ä¹‹é—´çš„ä¸åŒ


Git æ¸…ç†æ— æ•ˆçš„è¿œç¨‹è¿½è¸ªåˆ†æ”¯ï¼ˆåœºæ™¯ï¼šæœ¬åœ°å­˜åœ¨,è¿œç¨‹ä»“åº“å·²ç»åˆ é™¤çš„gï¼‰
git remote prune origin --dry-run	# æŸ¥çœ‹è¿œç¨‹ä»“åº“å·²ç»æ²¡æœ‰ï¼Œä½†æœ¬åœ°è¿˜æœ‰çš„åˆ†æ”¯
git remote prune origin				# åˆ é™¤

git revert commitid					# æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤æ¥æ’¤é”€æŸæ¬¡æäº¤ï¼Œæ­¤æ¬¡æäº¤ä¹‹å‰çš„commitéƒ½ä¼šè¢«ä¿ç•™
git reset ...						# ç›´æ¥å›æ»šå›å»ï¼Œb
```





**`git stash`è¯´æ˜**

å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶deme.txtï¼Œæˆ‘ä»¬ä¿®æ”¹demo.txtå†…å®¹ä»¥åï¼Œgit add demo.txt,   ç„¶åå†æ¬¡ä¿®æ”¹demo.txtæ–‡ä»¶ã€‚ã€‚,è¿™ä¸ªæ—¶å€™å·¥ä½œåŒºå’Œæš‚å­˜åŒºéƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬git stashï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºéƒ½å°†å˜æˆä¸Šæ¬¡æäº¤çš„åˆå§‹æ ·å­ã€‚git stash pop åï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ¢å¤çš„ä»…ä»…åªæœ‰å·¥ä½œåŒºï¼Œæš‚å­˜åŒºè¿˜æ˜¯ä¸Šæ¬¡æäº¤çš„åˆå§‹æ ·å­





