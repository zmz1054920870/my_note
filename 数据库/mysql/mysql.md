🔺前言：格式规范，本文中，如果命令中出现中括号则是可选参数或者命令，加了大括号就是必填参数或者命令

# 一、数据库分类及介绍



#### 关系型数据库：（`sql`）

- `Mysql`、`Oracle`、`Sql Server`、`DB2`、`SQLlite`
- 通过表与表之间，行和列之间的关系进行数据存储



#### 非关系型数据库：（`NoSQL`） Not Only 不仅仅是

- `Redis`、`MongDB`
- 非关系型数据库，对象存储，通过对象的自身的属性来决定



#### DBMS（数据库管理系统、软件）

可视化工具去操作我们的数据库，说一点哈，命令行也是可视化的。

`MySql`是最好的`RDBMS`（关系型数据库管理系统）应用软件之一



#### `Mysql`的四种语言

- `DDL`：数据库    定义   语言
- `DML`：数据库    操作   语言
- `DQL`：数据库    查询    语言
- `DCL`：数据库    控制    语言









# 二、操作数据库

操作数据库 > 操作数据库中的表 > 操作表中的数据



### 2.1 字符集和排序规则



#### 2.1.1 字符集

![image-20210831223732310](image-20210831223732310.png)

`UTF8`和`UTF8MB4`是常用的两种字符集，至于这两个选用哪个要根据自己业务情况而定。`UTF8MB4`兼容`UTF8`，比`UTF8`能表示更多的字符，Unicode编码区从编码区1-126属于`UTF8`区，当然`UTF8MB4`也兼容这个区，126行以下就是`UTF8MB4`扩充区，所以你要根据自己的业务进行选择，一般情况下`UTF8`就满足需求，当然如果考虑到以后扩展，比如考虑到以后存储`emoji`,就选择`UTF8MB4`，否则只是浪费空间。我建议还是选择`UTF8MB4`，毕竟对于大部分公司而言空间不是什么大问题。 



#### 2.1.2 排序规则

![image-20210831224149571](image-20210831224149571.png)



**准确性**

- `utf8mb4_unicode_ci` 是基于标准的Unicode来排序和比较，能够在各种语言之间精确排序，不区分大小写
- `utf8mb4_general_ci` 没有实现Unicode排序规则，在遇到某些特殊语言或者字符集，排序结果可能不一致，不区分大小写
- `ci`全称为case insensitive,意思是大小写不敏感，cs区分大小写



**性能**

- `utf8mb4_general_ci` 在比较和排序的时候更快
- `utf8mb4_unicode_ci` 在特殊情况下，Unicode排序规则为了能够处理特殊字符的情况，实现了略微复杂的排序算法。相比选择哪一种collation，使用者更应该关心字符集与排序规则在db里需要统一。
- `utf8mb4_bin`：将字符串每个字符用二进制数据编译存储，区分大小写，而且可以存二进制的内容。



总而言之，`utf8mb4_general_ci` 和`utf8mb4_unicode_ci` 是我们最常使用的排序规则。`utf8mb4_general_ci` 校对速度快，但准确度稍差。`utf8mb4_unicode_ci` 准确度高，但校对速度稍慢，两者都不区分大小写。这两个选哪个视自己情况而定，还是那句话尽可能保持db中的字符集和排序规则的统计。 



| 字符集选择                 | 排序规则选择         |
| -------------------------- | -------------------- |
| `utf8mb4 -- UTF-8 Unicode` | `utf8mb4_general_ci` |







### 2.2 数据库常见的字段类型

> ​	数值型

- `tinyint`				只占一个字节的大小，我们一般用不到， tiny：译 - 微小的

- `smallint`              占两个字节，small：译 - 小的

- `mediumint`            占三个字节，medium：译 - 中等

- `int`                        四个字节，标准的整数，我们一般使用这玩意🔺

	

****

- `float`                    浮点数， 四个字节
- `double`                  浮点数，八个字节
- `decimal`                字符串形式的浮点数， 金融计算的时候，一般使用decimal， decimal 译 - 十进制



> ​	字符串

- `char`					固定大小得字符串， 只有0 - 255  ，  存一句话这些玩意还是够用了
- `varchar`              可变字符串。  区间0 ~ 65535  ， 🔺常用的， 比如我们在这个字段里面存一个文本，基本够用了， 一般用来存一些变量就完全完全完全够用了
- `tinytext`            微型文本。 2的8次方减1， 已经很大了，很大一篇论文都够了
- `text`                    文本串， 2的16次方， 超级大了一般用不到，这种超级大的我们一般使用文本存储服务器了



> ​	时间跟日期

- `date`                   日期格式： `YYYY-MM-DD`
- `time`                   日期格式：`HH:MM:SS`
- `datetime`           日期格式：`YYYY-MM-DD    HH:MM:SS  `  这是最常用的时间存储格式了 ，或者使用int去存一个时间戳 🔺
- `timestamp`         时间戳
- `year`                    年份表示





> ​	null

空值，注意，不要使用null进行运算









### 2.3 数据库的字段属性

> ​	整型

![image-20210901000721754](image-20210901000721754.png)

![image-20210901000734086](image-20210901000734086.png)

- 无符号：勾选上以后，改字段不能为负整数
- 自动递增：
	- 通常理解为自增`autoincrement`, 自动在上一条的基础上 +1 （默认）， 这个是可以改的
	- 🔺我们通常用来设计唯一主键，必须是整数。
	- 也可以自定义设置设计主键自增的起始值和步长
	- 🔺一个表只能有一个auto_increment，且该列必须是primary key或者unique key
- 填充0：不足的位数用0来填充，比如我们填入一个整数5，长度为3，mysql会给你自动填充为005
- 不是null
	- 如果勾选上了，写入数据时，不填写值，就会报错
	- 如果不勾选上，写入数据时，不填写值，就会自动填充null，默认是null
- 默认：设置默认值



### 2.4 拓展

**阿里规范**

每一个表，都必须存在以下五个字段

```
id			主键
version		用于乐观锁
is_delete	伪删除字段（没有真正删除，True or False来表示），用于数据的健壮性和安全性
gmt_create	创建时间
gmt_update	x
```









```sql
# 连接数据库
mysql -uroot -p12345

# 查看所有的数据库
show databases

# 切换数据库
use information_schema

# 查看所有表
show tables

# 显示表中的所有信息
describe 表名			
desc 表名 		# 简写,也是可以的

# 创建一个数据库
create database 数据库名					#创建一个数据库，如果创建的数据库已经存在，则报错
create database if not exists 数据库名		#创建一个数据库，如果创建的数据库已经存在，则不创建，这个不会报错

# Sql的单行注释
-- 当行注释

# Sql的多行注释

/*
多行
注释
*/


# 🔺当前数据库才可以查看其下的表
select database()

# 删除数据库
drop database 数据库名字
drop database if exists 数据库名字			# 如果数据库存在，则删除

# 特殊说明：如果我们的表名或者字段名是mysql的一个元字符的话，这字符就必须带上``符号，表示丢弃元字符含义


# 
```























```bash
# 消息存储
热点信息我们一般放到NoSql里面

# 稳定版本Mysql
5.7 banb
```

