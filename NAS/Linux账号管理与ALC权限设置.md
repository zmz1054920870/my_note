## Linuxè´¦å·ç®¡ç†ä¸ALCæƒé™è®¾ç½®å­¦ä¹ å†…å®¹å¦‚ä¸‹



Linuxçš„è´¦å·ä¸ç”¨æˆ·ç»„

â€‹				ç”¨æˆ·æ ‡è¯†ç¬¦ï¼šUIDä¸GID

â€‹				ç”¨æˆ·è´¦å·

â€‹				æœ‰æ•ˆä¸åˆå§‹ç”¨æˆ·ç»„ï¼šgroupsï¼Œnewgrp

è´¦å·ç®¡ç†

â€‹				æ–°å¢ä¸åˆ é™¤ç”¨æˆ·useraddï¼Œç›¸å…³é…ç½®æ–‡ä»¶ï¼Œpasswdï¼Œchageï¼Œusermodï¼Œuserdel

â€‹				ç”¨æˆ·åŠŸèƒ½ï¼šfingleã€ chfnã€chshã€id

â€‹				æ–°å¢ä¸åˆ é™¤ç”¨æˆ·ç»„

â€‹				è´¦å·ç®¡ç†å®ä¾‹

åœ¨windowä¸‹ï¼Œç”¨æˆ·çš„è´¦æˆ·å¯†ç ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨SAMæ•°æ®åº“ä¸­çš„

åœ¨linuxä¸‹ï¼Œç”¨æˆ·çš„è´¦å·å¯†ç ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨/etc/passwd	/etc/shadow





**/etc/passwdæ–‡ä»¶è®²è§£**

```bash
[root@hecs-263993-0002 ~]# cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
# ç¬¬ä¸€ä¸ªéƒ¨åˆ†root
ä»£è¡¨è¿™ä¸ªç”¨æˆ·çš„ç”¨æˆ·å
# ç¬¬äºŒä¸ªéƒ¨åˆ†x
åœ¨æ—©æœŸçš„linuxä¸­è¿™é‡Œæ˜¯å­˜æ”¾å¯†ç çš„ï¼Œä½†æ˜¯ç”±äºå®‰å…¨æ€§çš„é—®é¢˜ï¼Œåé¢ç”¨xæ¥å ä½ï¼Œè¡¨ç¤ºæœªçŸ¥
# ç¬¬ä¸‰éƒ¨åˆ† 0
è¡¨ç¤ºuid
# ç¬¬å››éƒ¨åˆ† 0
è¡¨ç¤ºgid
# ç¬¬äº”éƒ¨åˆ†root
æ³¨é‡Šä¿¡æ¯
# ç¬¬å…­éƒ¨åˆ†/root
ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œåœ¨ç”¨æˆ·çš„å®¶ç›®å½•é‡Œé¢å­˜å‚¨äº†ç”¨æˆ·ç‰¹æœ‰çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚çš„è®¾ç½®ã€æˆ‘çš„cookieï¼ˆæ¯ä¸ªäººçš„å®¶ç›®å½•é‡Œé¢çš„ä¸œè¥¿éƒ½ä¸ä¸€æ ·ï¼‰ï¼Œç”¨æˆ·çº§åˆ«çš„ç”¨æˆ·ï¼Œé»˜è®¤æ˜¯/home/ç”¨æˆ·å ä½œä¸ºå®¶ç›®å½•ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±éµå¾ªåˆ«äººè§„åˆ™ï¼Œè¿™æ ·ä¸“ä¸šå•Š
# ç¬¬ä¸ƒéƒ¨åˆ† /bin/bash
è¿™ä¸ªç”¨æˆ·ç™»å½•æ—¶é»˜è®¤ä½¿ç”¨çš„shellï¼Œä¸€èˆ¬å°±ç”¨å®ƒäº†

bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
games:x:12:100:games:/usr/games:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
nobody:x:99:99:Nobody:/:/sbin/nologin
systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin
dbus:x:81:81:System message bus:/:/sbin/nologin
polkitd:x:999:998:User for polkitd:/:/sbin/nologin
postfix:x:89:89::/var/spool/postfix:/sbin/nologin
sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
chrony:x:998:996::/var/lib/chrony:/sbin/nologin
tcpdump:x:72:72::/:/sbin/nologin
rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin
rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin
nfsnobody:x:65534:65534:Anonymous NFS User:/var/lib/nfs:/sbin/nologin
```

- æ¯ä¸€è¡Œéƒ½è¡¨ç¤ºä¸€ä¸ªç”¨æˆ·
- æ¯ä¸€è¡Œéƒ½ç”¨6å†’å·ï¼Œå°†æ¯ä¸€è¡Œåˆ†å‰²æˆ7ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½ç”¨å«ä¹‰



**/etc/shadowè®²è§£**

```bash
root:$6$QB4C0yco$DfTEOVz.K17DPSFt/xyJ0ELwQDPVz0H9ImrvqyPkhPdMCUVSmYZ5o59GzNKNV6WxzxS/Jpv9w7gELbCAdbTfU1:18860:0:99999:7:::
# ç¬¬ä¸€éƒ¨åˆ†root
è¡¨ç¤ºç”¨æˆ·å
# ç¬¬äºŒéƒ¨åˆ†$6$QB4C0yco$DfTEOVz.K17DPSFt/xyJ0ELwQDPVz0H9ImrvqyPkhPdMCUVSmYZ5o59GzNKNV6WxzxS/Jpv9w7gELbCAdbTfU1
è¡¨ç¤ºç”¨æˆ·çš„å¯†ç ï¼Œè¿™ä¸ªå¯†ç æ˜¯ç»è¿‡åŠ å¯†çš„
# ç¬¬ä¸‰éƒ¨åˆ†18860ï¼ˆä»ç¬¬ä¸‰éƒ¨åˆ†å¼€å§‹è®°å½•çš„éƒ½æ˜¯å¯†ç çš„å±æ€§ä¿¡æ¯ï¼‰
18860è¡¨ç¤ºä»1970åˆ°ç°åœ¨ç»å†äº†å¤šé•¿æ—¶é—´
# ç¬¬å››éƒ¨åˆ†0
è¡¨ç¤ºå¯†ç æœ€å°ä½¿ç”¨å¤šå°‘å¤©
# ç¬¬äº”éƒ¨åˆ†99999
è¡¨ç¤ºå¯†ç æœ€å¤§ä½¿ç”¨å¤šå°‘å¤©
# ç¬¬å…­éƒ¨åˆ†7
æœ€å¤§ä½¿ç”¨å¤©æ•°åˆ°æœŸåœäº†çš„æ—¶é—´


bin:*:17834:0:99999:7:::
daemon:*:17834:0:99999:7:::
adm:*:17834:0:99999:7:::
lp:*:17834:0:99999:7:::
sync:*:17834:0:99999:7:::
shutdown:*:17834:0:99999:7:::
halt:*:17834:0:99999:7:::
mail:*:17834:0:99999:7:::
operator:*:17834:0:99999:7:::
games:*:17834:0:99999:7:::
ftp:*:17834:0:99999:7:::
nobody:*:17834:0:99999:7:::
systemd-network:!!:18684::::::
dbus:!!:18684::::::
polkitd:!!:18684::::::
postfix:!!:18684::::::
sshd:!!:18684::::::
chrony:!!:18684::::::
tcpdump:!!:18684::::::
rpc:!!:18937:0:99999:7:::
rpcuser:!!:18937::::::
nfsnobody:!!:18937::::::
```







**å…¶ä»–çŸ¥è¯†ç‚¹**

```bash
1ã€root ç”¨æˆ·çš„uid ä¸º 0

2ã€uid æ˜¯1 ~ 499ï¼Œ è¿™äº›ç”¨æˆ·æ˜¯ç³»ç»Ÿç”¨æˆ·ï¼Œä»–ä»¬æ˜¯ä¸èƒ½å¤Ÿç™»å½•ç³»ç»Ÿçš„

3ã€æ™®é€šç”¨æˆ·çš„uid æ˜¯ä»500 ~ 65535

4ã€æ¯ä¸€ä¸ªç”¨æˆ·éƒ½å¿…é¡»å±äºä¸€ä¸ªæŸä¸€ä¸ªç»„æ‰å¯ä»¥ï¼Œå³ä½¿æ˜¯rootç”¨æˆ· æˆ–è€… ç³»ç»Ÿç”¨æˆ·

5ã€åœ¨windowä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·çš„æ—¶å€™ï¼Œè¿™ä¸ªç”¨æˆ·å®ƒé»˜è®¤æ˜¯å±äºuserç»„çš„ï¼Œä½†æ˜¯åœ¨linuxç³»ç»Ÿä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œæ¯”å¦‚Tomï¼Œ æ­¤æ—¶linuxåœ¨åˆ›å»ºè¿™ä¸ªTomç”¨æˆ·çš„æ—¶å€™ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªåä¸ºTomçš„ç»„ï¼Œç„¶åæŠŠTomåŠ å…¥åˆ°Tomç»„é‡Œé¢å»

6ã€linuxç³»ç»Ÿä¸­ï¼Œç”¨æˆ·çš„è´¦å·å­˜æ”¾åœ¨/etc/passwd  å¯†ç å­˜æ”¾åœ¨/etc/shadow æ–‡ä»¶ä¸­

7ã€åœ¨linuxä¸€ä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶å±äºå¤šä¸ªç»„

8ã€é€šè¿‡groups ç”¨æˆ·åæ¥æŸ¥è¯¢
[root@hecs-263993-0002 home]# groups root
root : root
ç¬¬ä¸€ä¸ªroot è¡¨ç¤ºç”¨æˆ·å
ç¬¬äºŒä¸ªroot è¡¨ç¤ºæ‰€å±çš„ç»„

9ã€å°†ä¸€ä¸ªç”¨æˆ·åŠ å…¥åˆ°ä¸€ä¸ªç»„é‡Œé¢
gpasswd -a ç”¨æˆ·å ç”¨æˆ·ç»„
egï¼šgpasswd -a tom technology	# å°†tomåŠ å…¥åˆ°æŠ€æœ¯ç»„é‡Œé¢
[root@hecs-263993-0002 home]# groups tom
tom : tom technology
ç¬¬ä¸€ä¸ªtom è¡¨ç¤ºç”¨æˆ·å
ç¬¬äºŒä¸ªtom è¡¨ç¤ºtomç»„ï¼Œè¡¨ç¤ºä¸»ç»„
ç¬¬ä¸‰ä½technology è¡¨ç¤ºé™„å±ç»„

10ã€newgrp ç»„åï¼Œ  å¯ä»¥ä¸´æ—¶å°†ä¸€ä¸ªç»„è½¬æ¢æˆé»˜è®¤ä¸»ï¼Œæˆ–è€…ä¸»ç»„ï¼ˆå»ºç«‹ä¸€ä¸ªå­shellï¼Œ å°†ç»„åè®¾ç½®è®¾ç½®ä½ä¸»ç»„ï¼‰ï¼Œè¦æ¢å¤ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæ˜¯åœ¨å­shellä¸­å¼„çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥exité€€å‡ºå­shellå°±è¡Œäº†

11ã€åªæœ‰root ç”¨æˆ·å¯ä»¥ä¸ç”¨è¾“å…¥å¯†ç åˆ‡æ¢åˆ°æŒ‡å®šçš„ç”¨æˆ·

12ã€åªæœ‰rootç”¨æˆ·å¯ä»¥ç»™å…¶ä»–ç”¨æˆ·è®¾ç½®å¯†ç 

999ã€å¦‚æœç™»å½•shell è®¾ç½®æˆ /sbin/nologin , é‚£ä¹ˆè¿™ä¸ªç”¨æˆ·æ˜¯ä¸èƒ½å¤Ÿè¿›è¡Œç™»å½•çš„ï¼Œå…¶ä»–ç”¨æˆ·ä¹Ÿä¸èƒ½åˆ‡æ¢åˆ°è¿™ä¸ªç”¨æˆ·é‡Œé¢æ¥ï¼Œå“ªæ€•ä½ æ˜¯rootç”¨æˆ·ã€‚æ„ä¹‰åœ¨äºï¼šæ¯”å¦‚æˆ‘æ­å»ºä¸€ä¸ªæœåŠ¡åšå…±äº«ï¼Œæˆ‘åªæƒ³ä½ æŒ‚è½½ä½¿ç”¨æˆ‘çš„å…±äº«ç›®å½•ï¼Œä¸æƒ³è®©ä½ ç™»å½•æˆ‘çš„ç³»ç»Ÿï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘å°±å¯ä»¥ç»™ä½ åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œè¿™ä¸ªè´¦å·çš„ç™»å½•shellè®¾ç½®æˆ/sbin/nologin
```





## åˆ›å»ºç”¨æˆ·

**å›¾åƒåˆ›å»º**

![image-20211107232507878](image-20211107232507878.png)





**å‘½ä»¤è¡Œ**



```bash

------------------------åˆ›å»ºç”¨æˆ·---------------------------------

# 1ã€åˆ›å»ºä¸€ä¸ªç”¨æˆ·
useradd bob			# æ‰€ç”¨éƒ½é‡‡ç”¨é»˜è®¤å€¼ï¼Œshellä½¿ç”¨/bin/shell  å®¶ç›®å½•ä½¿ç”¨/home/bob,å…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼

# 2ã€æŸ¥çœ‹åˆ›å»ºç”¨æˆ·çš„é»˜è®¤å€¼
useradd -D

GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/bash
SKEL=/etc/skel
CREATE_MAIL_SPOOL=yes

# 3ã€ä¿®æ”¹é»˜è®¤å€¼æ¨¡æ¿
vim /etc/default/useradd

GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/bash
SKEL=/etc/skel
CREATE_MAIL_SPOOL=yes

# 4ã€ç»™ç”¨æˆ·æ·»åŠ æ³¨é‡Š
useradd -c "è¿™æ˜¯ä¸€ä¸ªé“ä»”" bob

# 5ã€ç»™ç”¨æˆ·æŒ‡å®šshell
useradd -s /sbin/nologin bob

# 6ã€ç»™ç”¨æˆ·æŒ‡å®šå®¶ç›®å½•
useradd -d /home/bod bob

# 7ã€ç»™ç”¨æˆ·æŒ‡å®šä¸€ä¸ªç»„ï¼ˆå½“æˆ‘åˆ›å»ºä¸€ä¸ªç”¨æˆ·çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šä¸ºè¿™ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªåŒåçš„ç§äººç»„ï¼Œç„¶åå°†bobåŠ å…¥åˆ°bobç»„ä¸­ï¼Œä½†æ˜¯å½“æˆ‘ä»¬åœ¨åˆ›å»ºçš„æ—¶å€™æŒ‡å®šç»„çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¸ä¼šä¸ºbobåˆ›å»ºä¸€ä¸ªbobç»„ï¼Œè€Œæ˜¯ç›´æ¥åŠ å…¥åˆ°æŒ‡å®šçš„ç»„ä¸­ï¼Œåˆ‡è¿™ä¸ªç»„ä½œä¸ºbobçš„ä¸»ç»„ï¼‰
useradd -g tom bob

# 8ã€ç»™ç”¨æˆ·åˆ›å»ºåŒåä¸»ç»„ï¼Œå¹¶ç»™ä»–æŒ‡å®šåŠ å…¥ä¸€ä¸ªé™„å±ä¸»
useradd -G tom bob	# åˆ›å»ºbobè¿™ä¸ªç”¨æˆ·ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªbobåŒåçš„ä¸»ç»„ï¼Œå°†bobåŠ å…¥è¿›å»ï¼Œå¹¶ä¹ŸåŠ å…¥åˆ°tomè¿™ä¸ªé™„å±ä¸»é‡Œé¢ï¼Œæ­¤æ—¶bobåŒå±äºä¸¤ä¸ªç»„ï¼Œä¸»ç»„bobï¼Œé™„å±ç»„tom

# 9ã€ç»™ç”¨æˆ·æŒ‡å®šä¸»ç»„å’Œé™„å±ç»„
useradd -g tom -G alex bob	# åˆ›å»ºä¸€ä¸ªbobç”¨æˆ·ï¼Œç„¶åå°†bobåŠ å…¥åˆ°tomç»„å’Œalexç»„ä¸­ï¼Œå…¶ä¸­tomä½œä¸ºbobçš„ä¸»ç»„ï¼Œalexä½œä¸ºé™„å±ç»„ 

# 10ã€ç»™ç”¨æˆ·æŒ‡å®šuid
useradd -u 1000 bob		# è¿™ä¸ªç©æ„ä¸€èˆ¬è¿˜æ˜¯è®©ç³»ç»Ÿè‡ªå·±æŒ‡å®šæ¯”è¾ƒå¥½

# 11ã€æ‰¹é‡åˆ›å»ºç”¨æˆ·,b
[root@hecs-263993-0002 alex]# for i in `seq 1 10`
> do
> useradd user$i
> echo "redhat" | passwd --stdin user$i	# echoæ˜¯æ ‡å‡†è¾“å‡ºåˆ°å±å¹•ï¼Œé€šè¿‡ç®¡é“å°†æ ‡å‡†è¾“å…¥å˜æˆ--stdind
> done


---------------------------ä¿®æ”¹ç”¨æˆ· usermod-----------------------------------------------
# 12ã€ä¿®æ”¹ç”¨æˆ·shell
usermod tom -s /bin/bash

# 13ã€ä¿®æ”¹ç”¨æˆ·çš„å®¶ç›®å½•
usermod tom -c 'xxxxxx'

----------------------------ä¿®æ”¹å¯†ç  passwd--------------------------------------------
# 14ã€ç»™æˆ‘tomæ·»åŠ ä¸€ä¸ªå¯†ç ï¼ˆå¿…é¡»æ˜¯rootç”¨æˆ·æ‰æœ‰æƒé™æ·»åŠ å¯†ç ï¼Œå“ªæ€•å°†è¿™ä¸ªç”¨æˆ·è¢«æ·»åŠ åˆ°rootç»„é‡Œé¢ä¹Ÿä¸è¡Œï¼‰
passwd bob
>è¯·è¾“å…¥å¯†ç ï¼š

# 15ã€æŸ¥çœ‹ç”¨æˆ·çš„å¯†ç ä¿¡æ¯
passwd -S alex
alex PS 2021-11-07 0 99999 7 -1 (Password set, SHA512 crypt.)

# 16ã€å°†ä¸€ä¸ªç”¨æˆ·çš„å¯†ç åˆ é™¤
passwd -d bob

---------------------------åˆ é™¤ç”¨æˆ· userdel---------------------------------------------
# 17ã€åªåˆ é™¤ç”¨æˆ·
userdel tom

# 18ã€åˆ é™¤ç”¨æˆ·çš„åŒæ—¶åˆ é™¤å®ƒçš„å®¶ç›®å½•ï¼Œé‚®ä»¶ï¼Œä¸´æ—¶æ–‡ä»¶
userdel -r tom


```

```bash
# 19ã€chage çš„ç”¨æ³•
man chage

# 20ã€æ›´æ”¹tomæœ€åä¸€æ¬¡ä¿®æ”¹å¯†ç çš„æ—¶é—´
chage -d 2009-09-18 tom

# 21ã€ä¿®æ”¹tomç”¨æˆ·çš„å¤±æ•ˆæ—¶é—´
chage -E 2012-12-21

# 22ã€å¯†ç æœ€å°ä½¿ç”¨æ—¶é—´ï¼Œå¿…é¡»ä½¿ç”¨åˆ°è¿™ä¸ªæ—¶é—´ä»¥åæ‰å¯ä»¥ä¿®æ”¹
chage -m 10 tom

# 23ã€ä½äºå¤šå°‘å¤©å¿…é¡»ä¿®æ”¹å¯†ç ï¼Œå¦åˆ™å¤±æ•ˆ
chage -M 20 tom

# 24ã€è­¦å‘Šæ—¶é—´
chage -W 7 tom

# 25ã€åˆ—å‡ºä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰å¯†ç ä¿¡æ¯
```

![image-20211108010724679](image-20211108010724679.png)

## ALC

ğŸ”ºğŸ”º ALCæ˜¯ç»¼åˆç„¶åå–æœ€æœ€å°çš„æƒé™ï¼ˆ75 > 71ï¼‰ é‚£ä¹ˆå®ƒçš„æƒé™å°±æ˜¯71

```bash
# 1ã€è·å–ä¸€ä¸ªæ–‡ä»¶å¾—ACL
getfacl test.txt

# file: text.txt
# owner: root
# group: root
user::rw-
group::r--
other::r--



# 2ã€è®¾ç½®ä¸€ä¸ªç”¨æˆ·å¾—ACL
setfacl -m u:alex:rw test.txt		# -m æ˜¯ modify
[root@hecs-263993-0002 ~]# getfacl test.txt 
# file: test.txt
# owner: root
# group: root
user::rw-
user:alex:rw-
group::r--
mask::r--
other::r--

# 3ã€ä½†æˆ‘ä»¬è®¾ç½®äº†ACLä»¥åï¼Œllçš„æ—¶å€™æˆ‘ä»¬å‘ç°è¿™ä¸ªæ–‡ä»¶åé¢å˜æˆäº†+å·
[root@hecs-263993-0002 ~]# ll
total 12
-rw-r--r--  1 root root 32 Nov  7 17:14 demo.txt
-rw-r--r--  1 root root  5 Aug 26 16:52 tcp_keepalive_time~
-rw-r--r--+ 1 root root 38 Nov  7 17:14 test.txt

# 4ã€åˆ é™¤æ‰€æœ‰acl
setfacl -b test.txt
# file: test.txt
# owner: root
# group: root
user::rwx
group::r--
other::rwx

# 5ã€åˆ é™¤æŒ‡å®šçš„acl
setfacl -x u:alex test.txt
# file: test.txt
# owner: root
# group: root
user::rwx
user:jack:rwx
group::r--
mask::rwx
other::rwx

# 6ã€è®¾ç½®é»˜è®¤çš„ACLï¼ˆé»˜è®¤çš„ACLä¸ä¼šå¯¹å½“å‰çš„æ–‡ä»¶ç”Ÿæ•ˆï¼Œåªå¯¹ä¹‹åçš„æ–‡ä»¶ç”Ÿæ•ˆï¼Œæ‰€ä»¥é»˜è®¤ACLä¸€èˆ¬æ˜¯é’ˆå¯¹æ–‡ä»¶å¤¹çš„ï¼Œåé¢æ–°å»ºçš„æ–‡ä»¶ï¼Œä¼šç»§æ‰¿è¿™ä¸ªé»˜è®¤aclçš„å€¼ï¼‰
æ¡ˆä¾‹ï¼šæˆ‘ä»¬ç°åœ¨æƒ³ç»™testæ–‡ä»¶ä¸­ï¼Œä»¥åæ–°å»ºçš„æ‰€æœ‰æ–‡ä»¶é’ˆå¯¹alexç”¨æˆ·éƒ½ç”Ÿæˆalcï¼ˆè¿™æ—¶å€™æˆ‘ä»¬å°±è¦ä½¿ç”¨é»˜è®¤acläº†ï¼Œä¸ç„¶æ¯æ¬¡æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬éƒ½è¦å»æ‰‹åŠ¨è®¾ç½®ï¼Œå¤ªéº»çƒ¦äº†ï¼‰
setfacl -d -m u:alex:- test
# file: test
# owner: root
# group: root
user::rwx
group::rwx
other::rwx
default:user::rwx
default:user:jack:---
default:group::rwx
default:mask::rwx
default:other::rwx

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬touchä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒçš„aclä¸­ï¼Œå°±åŒ…å«æœ‰ç»§æ‰¿è¿‡æ¥çš„


# 7ã€maskæ¡ç›®
ä¸ºæ–‡ä»¶çš„ownerã€otherä¹‹å¤–çš„äººæŒ‡å®šçš„æœ€å¤§çš„æƒé™ï¼Œé€šè¿‡è¿™ä¸ªmaskæœ€å¤§çš„æƒé™æ¥æŒ‡å®šæƒé™çš„è¾¹ç•Œã€‚maskæ˜¯é’ˆå¯¹ç‰¹å®šçš„ç”¨æˆ·ï¼Œtom ã€ jackå’Œgroupçš„æœ€å¤§çš„æƒé™

# 8ã€æŒ‡å®šmask
setfacl -m mask:r-- tes
```

![image-20211110002247290](image-20211110002247290.png)



https://luoyiran.blog.csdn.net/article/details/80347558?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link